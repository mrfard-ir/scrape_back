var Sn=Object.defineProperty;var _n=(n,e,t)=>e in n?Sn(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Z=(n,e,t)=>_n(n,typeof e!="symbol"?e+"":e,t);var cs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Bs(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ks={exports:{}};(function(n,e){(function(t,s){s(n)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:cs,function(t){if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)t.exports=globalThis.browser;else{const s="The message port closed before a response was received.",i=r=>{const a={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(a).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class o extends WeakMap{constructor(k,N=void 0){super(N),this.createItem=k}get(k){return this.has(k)||this.set(k,this.createItem(k)),super.get(k)}}const u=_=>_&&typeof _=="object"&&typeof _.then=="function",h=(_,k)=>(...N)=>{r.runtime.lastError?_.reject(new Error(r.runtime.lastError.message)):k.singleCallbackArg||N.length<=1&&k.singleCallbackArg!==!1?_.resolve(N[0]):_.resolve(N)},g=_=>_==1?"argument":"arguments",w=(_,k)=>function(D,...K){if(K.length<k.minArgs)throw new Error(`Expected at least ${k.minArgs} ${g(k.minArgs)} for ${_}(), got ${K.length}`);if(K.length>k.maxArgs)throw new Error(`Expected at most ${k.maxArgs} ${g(k.maxArgs)} for ${_}(), got ${K.length}`);return new Promise((Y,X)=>{if(k.fallbackToNoCallback)try{D[_](...K,h({resolve:Y,reject:X},k))}catch(O){console.warn(`${_} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,O),D[_](...K),k.fallbackToNoCallback=!1,k.noCallback=!0,Y()}else k.noCallback?(D[_](...K),Y()):D[_](...K,h({resolve:Y,reject:X},k))})},d=(_,k,N)=>new Proxy(k,{apply(D,K,Y){return N.call(K,_,...Y)}});let p=Function.call.bind(Object.prototype.hasOwnProperty);const c=(_,k={},N={})=>{let D=Object.create(null),K={has(X,O){return O in _||O in D},get(X,O,J){if(O in D)return D[O];if(!(O in _))return;let W=_[O];if(typeof W=="function")if(typeof k[O]=="function")W=d(_,_[O],k[O]);else if(p(N,O)){let ee=w(O,N[O]);W=d(_,_[O],ee)}else W=W.bind(_);else if(typeof W=="object"&&W!==null&&(p(k,O)||p(N,O)))W=c(W,k[O],N[O]);else if(p(N,"*"))W=c(W,k[O],N["*"]);else return Object.defineProperty(D,O,{configurable:!0,enumerable:!0,get(){return _[O]},set(ee){_[O]=ee}}),W;return D[O]=W,W},set(X,O,J,W){return O in D?D[O]=J:_[O]=J,!0},defineProperty(X,O,J){return Reflect.defineProperty(D,O,J)},deleteProperty(X,O){return Reflect.deleteProperty(D,O)}},Y=Object.create(_);return new Proxy(Y,K)},l=_=>({addListener(k,N,...D){k.addListener(_.get(N),...D)},hasListener(k,N){return k.hasListener(_.get(N))},removeListener(k,N){k.removeListener(_.get(N))}}),f=new o(_=>typeof _!="function"?_:function(N){const D=c(N,{},{getContent:{minArgs:0,maxArgs:0}});_(D)}),m=new o(_=>typeof _!="function"?_:function(N,D,K){let Y=!1,X,O=new Promise(ae=>{X=function(B){Y=!0,ae(B)}}),J;try{J=_(N,D,X)}catch(ae){J=Promise.reject(ae)}const W=J!==!0&&u(J);if(J!==!0&&!W&&!Y)return!1;const ee=ae=>{ae.then(B=>{K(B)},B=>{let ne;B&&(B instanceof Error||typeof B.message=="string")?ne=B.message:ne="An unexpected error occurred",K({__mozWebExtensionPolyfillReject__:!0,message:ne})}).catch(B=>{console.error("Failed to send onMessage rejected reply",B)})};return ee(W?J:O),!0}),y=({reject:_,resolve:k},N)=>{r.runtime.lastError?r.runtime.lastError.message===s?k():_(new Error(r.runtime.lastError.message)):N&&N.__mozWebExtensionPolyfillReject__?_(new Error(N.message)):k(N)},b=(_,k,N,...D)=>{if(D.length<k.minArgs)throw new Error(`Expected at least ${k.minArgs} ${g(k.minArgs)} for ${_}(), got ${D.length}`);if(D.length>k.maxArgs)throw new Error(`Expected at most ${k.maxArgs} ${g(k.maxArgs)} for ${_}(), got ${D.length}`);return new Promise((K,Y)=>{const X=y.bind(null,{resolve:K,reject:Y});D.push(X),N.sendMessage(...D)})},S={devtools:{network:{onRequestFinished:l(f)}},runtime:{onMessage:l(m),onMessageExternal:l(m),sendMessage:b.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:b.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},M={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return a.privacy={network:{"*":M},services:{"*":M},websites:{"*":M}},c(r,S,a)};t.exports=i(chrome)}})})(Ks);var kn=Ks.exports;const H=Bs(kn);let yt;const An=new Uint8Array(16);function Cn(){if(!yt&&(yt=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!yt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return yt(An)}const Q=[];for(let n=0;n<256;++n)Q.push((n+256).toString(16).slice(1));function Tn(n,e=0){return Q[n[e+0]]+Q[n[e+1]]+Q[n[e+2]]+Q[n[e+3]]+"-"+Q[n[e+4]]+Q[n[e+5]]+"-"+Q[n[e+6]]+Q[n[e+7]]+"-"+Q[n[e+8]]+Q[n[e+9]]+"-"+Q[n[e+10]]+Q[n[e+11]]+Q[n[e+12]]+Q[n[e+13]]+Q[n[e+14]]+Q[n[e+15]]}const Pn=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ss={randomUUID:Pn};function Ws(n,e,t){if(Ss.randomUUID&&!e&&!n)return Ss.randomUUID();n=n||{};const s=n.random||(n.rng||Cn)();return s[6]=s[6]&15|64,s[8]=s[8]&63|128,Tn(s)}class ce{constructor(){Z(this,"available",!1);Z(this,"bootResolve");Z(this,"bootReject");Z(this,"bootPromise");this.bootResolve=()=>{},this.bootReject=()=>{},this.bootPromise=new Promise((e,t)=>{this.bootResolve=()=>{this.available=!0,e()},this.bootReject=()=>{this.available=!1,t()}})}}class Ln extends ce{constructor(){super();Z(this,"messageMap",new Map);Z(this,"popupPort",null);H.runtime.onConnect.addListener(this.longLivedMessageHandler.bind(this))}async boot(){this.bootResolve(),await this.bootPromise}longLivedMessageHandler(t){this.popupPort=t,t.onMessage.addListener(s=>{const i=this.messageMap.get(s.type);i&&this.bootPromise.then(()=>i(s.data)).then(r=>{t.postMessage({id:s.id,...r})}).catch(()=>{})}),t.onDisconnect.addListener(()=>{this.popupPort=null})}subscribe(t){Object.entries(t).forEach(([i,r])=>{if(this.messageMap.has(i))throw Error(`MessageService: subscribe already has ${i} handler`);this.messageMap.set(i,r)})}notifyPopup(t){var s;(s=this.popupPort)==null||s.postMessage(t)}}const jt=new Ln;var U=(n=>(n.persist="persist",n.session="session",n))(U||{});class re{constructor(e,t){Z(this,"storageAreaMap",{[U.session]:H.storage.session,[U.persist]:H.storage.local});Z(this,"state");this.moduleName=e,this.moduleSchema=t,this.state=t.getDefaultValue()}async sync(){this.state=await this.get()}async set(e){const t=new Map;Object.entries(e).forEach(([s,i])=>{const r=this.moduleSchema.getPropDescription(s),a=t.get(r)??{};t.set(r,{...a,[s]:i})}),this.state=Object.assign({},...t.values()),await Promise.all([...t.entries()].map(([s,i])=>this.storageAreaMap[s].set({[this.moduleName]:i})))}async setItems(e){const t=await this.get(),s=Object.assign(t,e);await this.set(s)}async get(){const t=(await Promise.all(Object.values(this.storageAreaMap).map(a=>a.get(this.moduleName)))).map(a=>a[this.moduleName]),s=this.moduleSchema.getDefaultValue(),i=Object.assign({},s,...t);return this.moduleSchema.safeParseWithDefaults(i)}async getItems(...e){const t=await this.get();return re.pickPartialObject(t,e)}async remove(){await Promise.all(Object.values(this.storageAreaMap).map(e=>e.remove(this.moduleName)))}async removeItems(...e){const t=await this.get(),s=re.omitPartialObject(t,e);await this.set(s)}static omitPartialObject(e,t){return Object.fromEntries(Object.entries(e).filter(([i])=>!t.includes(i)))}static pickPartialObject(e,t){return Object.fromEntries(t.map(i=>[i,e[i]]))}}var V;(function(n){n.assertEqual=i=>i;function e(i){}n.assertIs=e;function t(i){throw new Error}n.assertNever=t,n.arrayToEnum=i=>{const r={};for(const a of i)r[a]=a;return r},n.getValidEnumValues=i=>{const r=n.objectKeys(i).filter(o=>typeof i[i[o]]!="number"),a={};for(const o of r)a[o]=i[o];return n.objectValues(a)},n.objectValues=i=>n.objectKeys(i).map(function(r){return i[r]}),n.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const r=[];for(const a in i)Object.prototype.hasOwnProperty.call(i,a)&&r.push(a);return r},n.find=(i,r)=>{for(const a of i)if(r(a))return a},n.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function s(i,r=" | "){return i.map(a=>typeof a=="string"?`'${a}'`:a).join(r)}n.joinValues=s,n.jsonStringifyReplacer=(i,r)=>typeof r=="bigint"?r.toString():r})(V||(V={}));var Xt;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(Xt||(Xt={}));const C=V.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ae=n=>{switch(typeof n){case"undefined":return C.undefined;case"string":return C.string;case"number":return isNaN(n)?C.nan:C.number;case"boolean":return C.boolean;case"function":return C.function;case"bigint":return C.bigint;case"symbol":return C.symbol;case"object":return Array.isArray(n)?C.array:n===null?C.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?C.promise:typeof Map<"u"&&n instanceof Map?C.map:typeof Set<"u"&&n instanceof Set?C.set:typeof Date<"u"&&n instanceof Date?C.date:C.object;default:return C.unknown}},x=V.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),On=n=>JSON.stringify(n,null,2).replace(/"([^"]+)":/g,"$1:");class oe extends Error{constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(r){return r.message},s={_errors:[]},i=r=>{for(const a of r.issues)if(a.code==="invalid_union")a.unionErrors.map(i);else if(a.code==="invalid_return_type")i(a.returnTypeError);else if(a.code==="invalid_arguments")i(a.argumentsError);else if(a.path.length===0)s._errors.push(t(a));else{let o=s,u=0;for(;u<a.path.length;){const h=a.path[u];u===a.path.length-1?(o[h]=o[h]||{_errors:[]},o[h]._errors.push(t(a))):o[h]=o[h]||{_errors:[]},o=o[h],u++}}};return i(this),s}static assert(e){if(!(e instanceof oe))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,V.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},s=[];for(const i of this.issues)i.path.length>0?(t[i.path[0]]=t[i.path[0]]||[],t[i.path[0]].push(e(i))):s.push(e(i));return{formErrors:s,fieldErrors:t}}get formErrors(){return this.flatten()}}oe.create=n=>new oe(n);const ze=(n,e)=>{let t;switch(n.code){case x.invalid_type:n.received===C.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case x.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,V.jsonStringifyReplacer)}`;break;case x.unrecognized_keys:t=`Unrecognized key(s) in object: ${V.joinValues(n.keys,", ")}`;break;case x.invalid_union:t="Invalid input";break;case x.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${V.joinValues(n.options)}`;break;case x.invalid_enum_value:t=`Invalid enum value. Expected ${V.joinValues(n.options)}, received '${n.received}'`;break;case x.invalid_arguments:t="Invalid function arguments";break;case x.invalid_return_type:t="Invalid function return type";break;case x.invalid_date:t="Invalid date";break;case x.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:V.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case x.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case x.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case x.custom:t="Invalid input";break;case x.invalid_intersection_types:t="Intersection results could not be merged";break;case x.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case x.not_finite:t="Number must be finite";break;default:t=e.defaultError,V.assertNever(n)}return{message:t}};let qs=ze;function En(n){qs=n}function xt(){return qs}const St=n=>{const{data:e,path:t,errorMaps:s,issueData:i}=n,r=[...t,...i.path||[]],a={...i,path:r};if(i.message!==void 0)return{...i,path:r,message:i.message};let o="";const u=s.filter(h=>!!h).slice().reverse();for(const h of u)o=h(a,{data:e,defaultError:o}).message;return{...i,path:r,message:o}},In=[];function A(n,e){const t=xt(),s=St({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,t,t===ze?void 0:ze].filter(i=>!!i)});n.common.issues.push(s)}class te{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const s=[];for(const i of t){if(i.status==="aborted")return L;i.status==="dirty"&&e.dirty(),s.push(i.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,t){const s=[];for(const i of t){const r=await i.key,a=await i.value;s.push({key:r,value:a})}return te.mergeObjectSync(e,s)}static mergeObjectSync(e,t){const s={};for(const i of t){const{key:r,value:a}=i;if(r.status==="aborted"||a.status==="aborted")return L;r.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),r.value!=="__proto__"&&(typeof a.value<"u"||i.alwaysSet)&&(s[r.value]=a.value)}return{status:e.value,value:s}}}const L=Object.freeze({status:"aborted"}),Me=n=>({status:"dirty",value:n}),ie=n=>({status:"valid",value:n}),es=n=>n.status==="aborted",ts=n=>n.status==="dirty",Qe=n=>n.status==="valid",Xe=n=>typeof Promise<"u"&&n instanceof Promise;function _t(n,e,t,s){if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(n)}function Hs(n,e,t,s,i){if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,t),t}var T;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(T||(T={}));var Je,Ge;class be{constructor(e,t,s,i){this._cachedPath=[],this.parent=e,this.data=t,this._path=s,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const _s=(n,e)=>{if(Qe(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new oe(n.common.issues);return this._error=t,this._error}}};function R(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:s,description:i}=n;if(e&&(t||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(a,o)=>{var u,h;const{message:g}=n;return a.code==="invalid_enum_value"?{message:g??o.defaultError}:typeof o.data>"u"?{message:(u=g??s)!==null&&u!==void 0?u:o.defaultError}:a.code!=="invalid_type"?{message:o.defaultError}:{message:(h=g??t)!==null&&h!==void 0?h:o.defaultError}},description:i}}class j{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Ae(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Ae(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new te,ctx:{common:e.parent.common,data:e.data,parsedType:Ae(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Xe(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const s=this.safeParse(e,t);if(s.success)return s.data;throw s.error}safeParse(e,t){var s;const i={common:{issues:[],async:(s=t==null?void 0:t.async)!==null&&s!==void 0?s:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ae(e)},r=this._parseSync({data:e,path:i.path,parent:i});return _s(i,r)}async parseAsync(e,t){const s=await this.safeParseAsync(e,t);if(s.success)return s.data;throw s.error}async safeParseAsync(e,t){const s={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ae(e)},i=this._parse({data:e,path:s.path,parent:s}),r=await(Xe(i)?i:Promise.resolve(i));return _s(s,r)}refine(e,t){const s=i=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(i):t;return this._refinement((i,r)=>{const a=e(i),o=()=>r.addIssue({code:x.custom,...s(i)});return typeof Promise<"u"&&a instanceof Promise?a.then(u=>u?!0:(o(),!1)):a?!0:(o(),!1)})}refinement(e,t){return this._refinement((s,i)=>e(s)?!0:(i.addIssue(typeof t=="function"?t(s,i):t),!1))}_refinement(e){return new he({schema:this,typeName:P.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return ve.create(this,this._def)}nullable(){return Le.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return de.create(this,this._def)}promise(){return Ze.create(this,this._def)}or(e){return nt.create([this,e],this._def)}and(e){return it.create(this,e,this._def)}transform(e){return new he({...R(this._def),schema:this,typeName:P.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new lt({...R(this._def),innerType:this,defaultValue:t,typeName:P.ZodDefault})}brand(){return new ls({typeName:P.ZodBranded,type:this,...R(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new ut({...R(this._def),innerType:this,catchValue:t,typeName:P.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return pt.create(this,e)}readonly(){return dt.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Rn=/^c[^\s-]{8,}$/i,Nn=/^[0-9a-z]+$/,jn=/^[0-9A-HJKMNP-TV-Z]{26}$/,Dn=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,$n=/^[a-z0-9_-]{21}$/i,Mn=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Vn=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Un="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Ht;const zn=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Fn=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Zn=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Js="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Bn=new RegExp(`^${Js}$`);function Gs(n){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`),e}function Kn(n){return new RegExp(`^${Gs(n)}$`)}function Ys(n){let e=`${Js}T${Gs(n)}`;const t=[];return t.push(n.local?"Z?":"Z"),n.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function Wn(n,e){return!!((e==="v4"||!e)&&zn.test(n)||(e==="v6"||!e)&&Fn.test(n))}class ue extends j{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==C.string){const r=this._getOrReturnCtx(e);return A(r,{code:x.invalid_type,expected:C.string,received:r.parsedType}),L}const s=new te;let i;for(const r of this._def.checks)if(r.kind==="min")e.data.length<r.value&&(i=this._getOrReturnCtx(e,i),A(i,{code:x.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),s.dirty());else if(r.kind==="max")e.data.length>r.value&&(i=this._getOrReturnCtx(e,i),A(i,{code:x.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),s.dirty());else if(r.kind==="length"){const a=e.data.length>r.value,o=e.data.length<r.value;(a||o)&&(i=this._getOrReturnCtx(e,i),a?A(i,{code:x.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}):o&&A(i,{code:x.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}),s.dirty())}else if(r.kind==="email")Vn.test(e.data)||(i=this._getOrReturnCtx(e,i),A(i,{validation:"email",code:x.invalid_string,message:r.message}),s.dirty());else if(r.kind==="emoji")Ht||(Ht=new RegExp(Un,"u")),Ht.test(e.data)||(i=this._getOrReturnCtx(e,i),A(i,{validation:"emoji",code:x.invalid_string,message:r.message}),s.dirty());else if(r.kind==="uuid")Dn.test(e.data)||(i=this._getOrReturnCtx(e,i),A(i,{validation:"uuid",code:x.invalid_string,message:r.message}),s.dirty());else if(r.kind==="nanoid")$n.test(e.data)||(i=this._getOrReturnCtx(e,i),A(i,{validation:"nanoid",code:x.invalid_string,message:r.message}),s.dirty());else if(r.kind==="cuid")Rn.test(e.data)||(i=this._getOrReturnCtx(e,i),A(i,{validation:"cuid",code:x.invalid_string,message:r.message}),s.dirty());else if(r.kind==="cuid2")Nn.test(e.data)||(i=this._getOrReturnCtx(e,i),A(i,{validation:"cuid2",code:x.invalid_string,message:r.message}),s.dirty());else if(r.kind==="ulid")jn.test(e.data)||(i=this._getOrReturnCtx(e,i),A(i,{validation:"ulid",code:x.invalid_string,message:r.message}),s.dirty());else if(r.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),A(i,{validation:"url",code:x.invalid_string,message:r.message}),s.dirty()}else r.kind==="regex"?(r.regex.lastIndex=0,r.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),A(i,{validation:"regex",code:x.invalid_string,message:r.message}),s.dirty())):r.kind==="trim"?e.data=e.data.trim():r.kind==="includes"?e.data.includes(r.value,r.position)||(i=this._getOrReturnCtx(e,i),A(i,{code:x.invalid_string,validation:{includes:r.value,position:r.position},message:r.message}),s.dirty()):r.kind==="toLowerCase"?e.data=e.data.toLowerCase():r.kind==="toUpperCase"?e.data=e.data.toUpperCase():r.kind==="startsWith"?e.data.startsWith(r.value)||(i=this._getOrReturnCtx(e,i),A(i,{code:x.invalid_string,validation:{startsWith:r.value},message:r.message}),s.dirty()):r.kind==="endsWith"?e.data.endsWith(r.value)||(i=this._getOrReturnCtx(e,i),A(i,{code:x.invalid_string,validation:{endsWith:r.value},message:r.message}),s.dirty()):r.kind==="datetime"?Ys(r).test(e.data)||(i=this._getOrReturnCtx(e,i),A(i,{code:x.invalid_string,validation:"datetime",message:r.message}),s.dirty()):r.kind==="date"?Bn.test(e.data)||(i=this._getOrReturnCtx(e,i),A(i,{code:x.invalid_string,validation:"date",message:r.message}),s.dirty()):r.kind==="time"?Kn(r).test(e.data)||(i=this._getOrReturnCtx(e,i),A(i,{code:x.invalid_string,validation:"time",message:r.message}),s.dirty()):r.kind==="duration"?Mn.test(e.data)||(i=this._getOrReturnCtx(e,i),A(i,{validation:"duration",code:x.invalid_string,message:r.message}),s.dirty()):r.kind==="ip"?Wn(e.data,r.version)||(i=this._getOrReturnCtx(e,i),A(i,{validation:"ip",code:x.invalid_string,message:r.message}),s.dirty()):r.kind==="base64"?Zn.test(e.data)||(i=this._getOrReturnCtx(e,i),A(i,{validation:"base64",code:x.invalid_string,message:r.message}),s.dirty()):V.assertNever(r);return{status:s.value,value:e.data}}_regex(e,t,s){return this.refinement(i=>e.test(i),{validation:t,code:x.invalid_string,...T.errToObj(s)})}_addCheck(e){return new ue({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...T.errToObj(e)})}url(e){return this._addCheck({kind:"url",...T.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...T.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...T.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...T.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...T.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...T.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...T.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...T.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...T.errToObj(e)})}datetime(e){var t,s;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,local:(s=e==null?void 0:e.local)!==null&&s!==void 0?s:!1,...T.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...T.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...T.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...T.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...T.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...T.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...T.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...T.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...T.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...T.errToObj(t)})}nonempty(e){return this.min(1,T.errToObj(e))}trim(){return new ue({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ue({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ue({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}ue.create=n=>{var e;return new ue({checks:[],typeName:P.ZodString,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...R(n)})};function qn(n,e){const t=(n.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,i=t>s?t:s,r=parseInt(n.toFixed(i).replace(".","")),a=parseInt(e.toFixed(i).replace(".",""));return r%a/Math.pow(10,i)}class Ce extends j{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==C.number){const r=this._getOrReturnCtx(e);return A(r,{code:x.invalid_type,expected:C.number,received:r.parsedType}),L}let s;const i=new te;for(const r of this._def.checks)r.kind==="int"?V.isInteger(e.data)||(s=this._getOrReturnCtx(e,s),A(s,{code:x.invalid_type,expected:"integer",received:"float",message:r.message}),i.dirty()):r.kind==="min"?(r.inclusive?e.data<r.value:e.data<=r.value)&&(s=this._getOrReturnCtx(e,s),A(s,{code:x.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),i.dirty()):r.kind==="max"?(r.inclusive?e.data>r.value:e.data>=r.value)&&(s=this._getOrReturnCtx(e,s),A(s,{code:x.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),i.dirty()):r.kind==="multipleOf"?qn(e.data,r.value)!==0&&(s=this._getOrReturnCtx(e,s),A(s,{code:x.not_multiple_of,multipleOf:r.value,message:r.message}),i.dirty()):r.kind==="finite"?Number.isFinite(e.data)||(s=this._getOrReturnCtx(e,s),A(s,{code:x.not_finite,message:r.message}),i.dirty()):V.assertNever(r);return{status:i.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,T.toString(t))}gt(e,t){return this.setLimit("min",e,!1,T.toString(t))}lte(e,t){return this.setLimit("max",e,!0,T.toString(t))}lt(e,t){return this.setLimit("max",e,!1,T.toString(t))}setLimit(e,t,s,i){return new Ce({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:T.toString(i)}]})}_addCheck(e){return new Ce({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:T.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:T.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:T.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:T.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:T.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:T.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:T.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:T.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:T.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&V.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(t===null||s.value>t)&&(t=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Ce.create=n=>new Ce({checks:[],typeName:P.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,...R(n)});class Te extends j{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==C.bigint){const r=this._getOrReturnCtx(e);return A(r,{code:x.invalid_type,expected:C.bigint,received:r.parsedType}),L}let s;const i=new te;for(const r of this._def.checks)r.kind==="min"?(r.inclusive?e.data<r.value:e.data<=r.value)&&(s=this._getOrReturnCtx(e,s),A(s,{code:x.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),i.dirty()):r.kind==="max"?(r.inclusive?e.data>r.value:e.data>=r.value)&&(s=this._getOrReturnCtx(e,s),A(s,{code:x.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),i.dirty()):r.kind==="multipleOf"?e.data%r.value!==BigInt(0)&&(s=this._getOrReturnCtx(e,s),A(s,{code:x.not_multiple_of,multipleOf:r.value,message:r.message}),i.dirty()):V.assertNever(r);return{status:i.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,T.toString(t))}gt(e,t){return this.setLimit("min",e,!1,T.toString(t))}lte(e,t){return this.setLimit("max",e,!0,T.toString(t))}lt(e,t){return this.setLimit("max",e,!1,T.toString(t))}setLimit(e,t,s,i){return new Te({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:T.toString(i)}]})}_addCheck(e){return new Te({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:T.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:T.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:T.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:T.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:T.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Te.create=n=>{var e;return new Te({checks:[],typeName:P.ZodBigInt,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...R(n)})};class et extends j{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==C.boolean){const s=this._getOrReturnCtx(e);return A(s,{code:x.invalid_type,expected:C.boolean,received:s.parsedType}),L}return ie(e.data)}}et.create=n=>new et({typeName:P.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,...R(n)});class Ie extends j{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==C.date){const r=this._getOrReturnCtx(e);return A(r,{code:x.invalid_type,expected:C.date,received:r.parsedType}),L}if(isNaN(e.data.getTime())){const r=this._getOrReturnCtx(e);return A(r,{code:x.invalid_date}),L}const s=new te;let i;for(const r of this._def.checks)r.kind==="min"?e.data.getTime()<r.value&&(i=this._getOrReturnCtx(e,i),A(i,{code:x.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),s.dirty()):r.kind==="max"?e.data.getTime()>r.value&&(i=this._getOrReturnCtx(e,i),A(i,{code:x.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),s.dirty()):V.assertNever(r);return{status:s.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Ie({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:T.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:T.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}Ie.create=n=>new Ie({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:P.ZodDate,...R(n)});class kt extends j{_parse(e){if(this._getType(e)!==C.symbol){const s=this._getOrReturnCtx(e);return A(s,{code:x.invalid_type,expected:C.symbol,received:s.parsedType}),L}return ie(e.data)}}kt.create=n=>new kt({typeName:P.ZodSymbol,...R(n)});class tt extends j{_parse(e){if(this._getType(e)!==C.undefined){const s=this._getOrReturnCtx(e);return A(s,{code:x.invalid_type,expected:C.undefined,received:s.parsedType}),L}return ie(e.data)}}tt.create=n=>new tt({typeName:P.ZodUndefined,...R(n)});class st extends j{_parse(e){if(this._getType(e)!==C.null){const s=this._getOrReturnCtx(e);return A(s,{code:x.invalid_type,expected:C.null,received:s.parsedType}),L}return ie(e.data)}}st.create=n=>new st({typeName:P.ZodNull,...R(n)});class Fe extends j{constructor(){super(...arguments),this._any=!0}_parse(e){return ie(e.data)}}Fe.create=n=>new Fe({typeName:P.ZodAny,...R(n)});class Ee extends j{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ie(e.data)}}Ee.create=n=>new Ee({typeName:P.ZodUnknown,...R(n)});class ke extends j{_parse(e){const t=this._getOrReturnCtx(e);return A(t,{code:x.invalid_type,expected:C.never,received:t.parsedType}),L}}ke.create=n=>new ke({typeName:P.ZodNever,...R(n)});class At extends j{_parse(e){if(this._getType(e)!==C.undefined){const s=this._getOrReturnCtx(e);return A(s,{code:x.invalid_type,expected:C.void,received:s.parsedType}),L}return ie(e.data)}}At.create=n=>new At({typeName:P.ZodVoid,...R(n)});class de extends j{_parse(e){const{ctx:t,status:s}=this._processInputParams(e),i=this._def;if(t.parsedType!==C.array)return A(t,{code:x.invalid_type,expected:C.array,received:t.parsedType}),L;if(i.exactLength!==null){const a=t.data.length>i.exactLength.value,o=t.data.length<i.exactLength.value;(a||o)&&(A(t,{code:a?x.too_big:x.too_small,minimum:o?i.exactLength.value:void 0,maximum:a?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),s.dirty())}if(i.minLength!==null&&t.data.length<i.minLength.value&&(A(t,{code:x.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),s.dirty()),i.maxLength!==null&&t.data.length>i.maxLength.value&&(A(t,{code:x.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),s.dirty()),t.common.async)return Promise.all([...t.data].map((a,o)=>i.type._parseAsync(new be(t,a,t.path,o)))).then(a=>te.mergeArray(s,a));const r=[...t.data].map((a,o)=>i.type._parseSync(new be(t,a,t.path,o)));return te.mergeArray(s,r)}get element(){return this._def.type}min(e,t){return new de({...this._def,minLength:{value:e,message:T.toString(t)}})}max(e,t){return new de({...this._def,maxLength:{value:e,message:T.toString(t)}})}length(e,t){return new de({...this._def,exactLength:{value:e,message:T.toString(t)}})}nonempty(e){return this.min(1,e)}}de.create=(n,e)=>new de({type:n,minLength:null,maxLength:null,exactLength:null,typeName:P.ZodArray,...R(e)});function $e(n){if(n instanceof G){const e={};for(const t in n.shape){const s=n.shape[t];e[t]=ve.create($e(s))}return new G({...n._def,shape:()=>e})}else return n instanceof de?new de({...n._def,type:$e(n.element)}):n instanceof ve?ve.create($e(n.unwrap())):n instanceof Le?Le.create($e(n.unwrap())):n instanceof ye?ye.create(n.items.map(e=>$e(e))):n}class G extends j{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=V.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==C.object){const h=this._getOrReturnCtx(e);return A(h,{code:x.invalid_type,expected:C.object,received:h.parsedType}),L}const{status:s,ctx:i}=this._processInputParams(e),{shape:r,keys:a}=this._getCached(),o=[];if(!(this._def.catchall instanceof ke&&this._def.unknownKeys==="strip"))for(const h in i.data)a.includes(h)||o.push(h);const u=[];for(const h of a){const g=r[h],w=i.data[h];u.push({key:{status:"valid",value:h},value:g._parse(new be(i,w,i.path,h)),alwaysSet:h in i.data})}if(this._def.catchall instanceof ke){const h=this._def.unknownKeys;if(h==="passthrough")for(const g of o)u.push({key:{status:"valid",value:g},value:{status:"valid",value:i.data[g]}});else if(h==="strict")o.length>0&&(A(i,{code:x.unrecognized_keys,keys:o}),s.dirty());else if(h!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const h=this._def.catchall;for(const g of o){const w=i.data[g];u.push({key:{status:"valid",value:g},value:h._parse(new be(i,w,i.path,g)),alwaysSet:g in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const h=[];for(const g of u){const w=await g.key,d=await g.value;h.push({key:w,value:d,alwaysSet:g.alwaysSet})}return h}).then(h=>te.mergeObjectSync(s,h)):te.mergeObjectSync(s,u)}get shape(){return this._def.shape()}strict(e){return T.errToObj,new G({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,s)=>{var i,r,a,o;const u=(a=(r=(i=this._def).errorMap)===null||r===void 0?void 0:r.call(i,t,s).message)!==null&&a!==void 0?a:s.defaultError;return t.code==="unrecognized_keys"?{message:(o=T.errToObj(e).message)!==null&&o!==void 0?o:u}:{message:u}}}:{}})}strip(){return new G({...this._def,unknownKeys:"strip"})}passthrough(){return new G({...this._def,unknownKeys:"passthrough"})}extend(e){return new G({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new G({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:P.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new G({...this._def,catchall:e})}pick(e){const t={};return V.objectKeys(e).forEach(s=>{e[s]&&this.shape[s]&&(t[s]=this.shape[s])}),new G({...this._def,shape:()=>t})}omit(e){const t={};return V.objectKeys(this.shape).forEach(s=>{e[s]||(t[s]=this.shape[s])}),new G({...this._def,shape:()=>t})}deepPartial(){return $e(this)}partial(e){const t={};return V.objectKeys(this.shape).forEach(s=>{const i=this.shape[s];e&&!e[s]?t[s]=i:t[s]=i.optional()}),new G({...this._def,shape:()=>t})}required(e){const t={};return V.objectKeys(this.shape).forEach(s=>{if(e&&!e[s])t[s]=this.shape[s];else{let r=this.shape[s];for(;r instanceof ve;)r=r._def.innerType;t[s]=r}}),new G({...this._def,shape:()=>t})}keyof(){return Qs(V.objectKeys(this.shape))}}G.create=(n,e)=>new G({shape:()=>n,unknownKeys:"strip",catchall:ke.create(),typeName:P.ZodObject,...R(e)});G.strictCreate=(n,e)=>new G({shape:()=>n,unknownKeys:"strict",catchall:ke.create(),typeName:P.ZodObject,...R(e)});G.lazycreate=(n,e)=>new G({shape:n,unknownKeys:"strip",catchall:ke.create(),typeName:P.ZodObject,...R(e)});class nt extends j{_parse(e){const{ctx:t}=this._processInputParams(e),s=this._def.options;function i(r){for(const o of r)if(o.result.status==="valid")return o.result;for(const o of r)if(o.result.status==="dirty")return t.common.issues.push(...o.ctx.common.issues),o.result;const a=r.map(o=>new oe(o.ctx.common.issues));return A(t,{code:x.invalid_union,unionErrors:a}),L}if(t.common.async)return Promise.all(s.map(async r=>{const a={...t,common:{...t.common,issues:[]},parent:null};return{result:await r._parseAsync({data:t.data,path:t.path,parent:a}),ctx:a}})).then(i);{let r;const a=[];for(const u of s){const h={...t,common:{...t.common,issues:[]},parent:null},g=u._parseSync({data:t.data,path:t.path,parent:h});if(g.status==="valid")return g;g.status==="dirty"&&!r&&(r={result:g,ctx:h}),h.common.issues.length&&a.push(h.common.issues)}if(r)return t.common.issues.push(...r.ctx.common.issues),r.result;const o=a.map(u=>new oe(u));return A(t,{code:x.invalid_union,unionErrors:o}),L}}get options(){return this._def.options}}nt.create=(n,e)=>new nt({options:n,typeName:P.ZodUnion,...R(e)});const Se=n=>n instanceof at?Se(n.schema):n instanceof he?Se(n.innerType()):n instanceof ot?[n.value]:n instanceof Pe?n.options:n instanceof ct?V.objectValues(n.enum):n instanceof lt?Se(n._def.innerType):n instanceof tt?[void 0]:n instanceof st?[null]:n instanceof ve?[void 0,...Se(n.unwrap())]:n instanceof Le?[null,...Se(n.unwrap())]:n instanceof ls||n instanceof dt?Se(n.unwrap()):n instanceof ut?Se(n._def.innerType):[];class Dt extends j{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==C.object)return A(t,{code:x.invalid_type,expected:C.object,received:t.parsedType}),L;const s=this.discriminator,i=t.data[s],r=this.optionsMap.get(i);return r?t.common.async?r._parseAsync({data:t.data,path:t.path,parent:t}):r._parseSync({data:t.data,path:t.path,parent:t}):(A(t,{code:x.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),L)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,s){const i=new Map;for(const r of t){const a=Se(r.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const o of a){if(i.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);i.set(o,r)}}return new Dt({typeName:P.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:i,...R(s)})}}function ss(n,e){const t=Ae(n),s=Ae(e);if(n===e)return{valid:!0,data:n};if(t===C.object&&s===C.object){const i=V.objectKeys(e),r=V.objectKeys(n).filter(o=>i.indexOf(o)!==-1),a={...n,...e};for(const o of r){const u=ss(n[o],e[o]);if(!u.valid)return{valid:!1};a[o]=u.data}return{valid:!0,data:a}}else if(t===C.array&&s===C.array){if(n.length!==e.length)return{valid:!1};const i=[];for(let r=0;r<n.length;r++){const a=n[r],o=e[r],u=ss(a,o);if(!u.valid)return{valid:!1};i.push(u.data)}return{valid:!0,data:i}}else return t===C.date&&s===C.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class it extends j{_parse(e){const{status:t,ctx:s}=this._processInputParams(e),i=(r,a)=>{if(es(r)||es(a))return L;const o=ss(r.value,a.value);return o.valid?((ts(r)||ts(a))&&t.dirty(),{status:t.value,value:o.data}):(A(s,{code:x.invalid_intersection_types}),L)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([r,a])=>i(r,a)):i(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}it.create=(n,e,t)=>new it({left:n,right:e,typeName:P.ZodIntersection,...R(t)});class ye extends j{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==C.array)return A(s,{code:x.invalid_type,expected:C.array,received:s.parsedType}),L;if(s.data.length<this._def.items.length)return A(s,{code:x.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),L;!this._def.rest&&s.data.length>this._def.items.length&&(A(s,{code:x.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const r=[...s.data].map((a,o)=>{const u=this._def.items[o]||this._def.rest;return u?u._parse(new be(s,a,s.path,o)):null}).filter(a=>!!a);return s.common.async?Promise.all(r).then(a=>te.mergeArray(t,a)):te.mergeArray(t,r)}get items(){return this._def.items}rest(e){return new ye({...this._def,rest:e})}}ye.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ye({items:n,typeName:P.ZodTuple,rest:null,...R(e)})};class rt extends j{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==C.object)return A(s,{code:x.invalid_type,expected:C.object,received:s.parsedType}),L;const i=[],r=this._def.keyType,a=this._def.valueType;for(const o in s.data)i.push({key:r._parse(new be(s,o,s.path,o)),value:a._parse(new be(s,s.data[o],s.path,o)),alwaysSet:o in s.data});return s.common.async?te.mergeObjectAsync(t,i):te.mergeObjectSync(t,i)}get element(){return this._def.valueType}static create(e,t,s){return t instanceof j?new rt({keyType:e,valueType:t,typeName:P.ZodRecord,...R(s)}):new rt({keyType:ue.create(),valueType:e,typeName:P.ZodRecord,...R(t)})}}class Ct extends j{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==C.map)return A(s,{code:x.invalid_type,expected:C.map,received:s.parsedType}),L;const i=this._def.keyType,r=this._def.valueType,a=[...s.data.entries()].map(([o,u],h)=>({key:i._parse(new be(s,o,s.path,[h,"key"])),value:r._parse(new be(s,u,s.path,[h,"value"]))}));if(s.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const u of a){const h=await u.key,g=await u.value;if(h.status==="aborted"||g.status==="aborted")return L;(h.status==="dirty"||g.status==="dirty")&&t.dirty(),o.set(h.value,g.value)}return{status:t.value,value:o}})}else{const o=new Map;for(const u of a){const h=u.key,g=u.value;if(h.status==="aborted"||g.status==="aborted")return L;(h.status==="dirty"||g.status==="dirty")&&t.dirty(),o.set(h.value,g.value)}return{status:t.value,value:o}}}}Ct.create=(n,e,t)=>new Ct({valueType:e,keyType:n,typeName:P.ZodMap,...R(t)});class Re extends j{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==C.set)return A(s,{code:x.invalid_type,expected:C.set,received:s.parsedType}),L;const i=this._def;i.minSize!==null&&s.data.size<i.minSize.value&&(A(s,{code:x.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),t.dirty()),i.maxSize!==null&&s.data.size>i.maxSize.value&&(A(s,{code:x.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),t.dirty());const r=this._def.valueType;function a(u){const h=new Set;for(const g of u){if(g.status==="aborted")return L;g.status==="dirty"&&t.dirty(),h.add(g.value)}return{status:t.value,value:h}}const o=[...s.data.values()].map((u,h)=>r._parse(new be(s,u,s.path,h)));return s.common.async?Promise.all(o).then(u=>a(u)):a(o)}min(e,t){return new Re({...this._def,minSize:{value:e,message:T.toString(t)}})}max(e,t){return new Re({...this._def,maxSize:{value:e,message:T.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Re.create=(n,e)=>new Re({valueType:n,minSize:null,maxSize:null,typeName:P.ZodSet,...R(e)});class Ue extends j{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==C.function)return A(t,{code:x.invalid_type,expected:C.function,received:t.parsedType}),L;function s(o,u){return St({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,xt(),ze].filter(h=>!!h),issueData:{code:x.invalid_arguments,argumentsError:u}})}function i(o,u){return St({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,xt(),ze].filter(h=>!!h),issueData:{code:x.invalid_return_type,returnTypeError:u}})}const r={errorMap:t.common.contextualErrorMap},a=t.data;if(this._def.returns instanceof Ze){const o=this;return ie(async function(...u){const h=new oe([]),g=await o._def.args.parseAsync(u,r).catch(p=>{throw h.addIssue(s(u,p)),h}),w=await Reflect.apply(a,this,g);return await o._def.returns._def.type.parseAsync(w,r).catch(p=>{throw h.addIssue(i(w,p)),h})})}else{const o=this;return ie(function(...u){const h=o._def.args.safeParse(u,r);if(!h.success)throw new oe([s(u,h.error)]);const g=Reflect.apply(a,this,h.data),w=o._def.returns.safeParse(g,r);if(!w.success)throw new oe([i(g,w.error)]);return w.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Ue({...this._def,args:ye.create(e).rest(Ee.create())})}returns(e){return new Ue({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,s){return new Ue({args:e||ye.create([]).rest(Ee.create()),returns:t||Ee.create(),typeName:P.ZodFunction,...R(s)})}}class at extends j{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}at.create=(n,e)=>new at({getter:n,typeName:P.ZodLazy,...R(e)});class ot extends j{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return A(t,{received:t.data,code:x.invalid_literal,expected:this._def.value}),L}return{status:"valid",value:e.data}}get value(){return this._def.value}}ot.create=(n,e)=>new ot({value:n,typeName:P.ZodLiteral,...R(e)});function Qs(n,e){return new Pe({values:n,typeName:P.ZodEnum,...R(e)})}class Pe extends j{constructor(){super(...arguments),Je.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),s=this._def.values;return A(t,{expected:V.joinValues(s),received:t.parsedType,code:x.invalid_type}),L}if(_t(this,Je)||Hs(this,Je,new Set(this._def.values)),!_t(this,Je).has(e.data)){const t=this._getOrReturnCtx(e),s=this._def.values;return A(t,{received:t.data,code:x.invalid_enum_value,options:s}),L}return ie(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Pe.create(e,{...this._def,...t})}exclude(e,t=this._def){return Pe.create(this.options.filter(s=>!e.includes(s)),{...this._def,...t})}}Je=new WeakMap;Pe.create=Qs;class ct extends j{constructor(){super(...arguments),Ge.set(this,void 0)}_parse(e){const t=V.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==C.string&&s.parsedType!==C.number){const i=V.objectValues(t);return A(s,{expected:V.joinValues(i),received:s.parsedType,code:x.invalid_type}),L}if(_t(this,Ge)||Hs(this,Ge,new Set(V.getValidEnumValues(this._def.values))),!_t(this,Ge).has(e.data)){const i=V.objectValues(t);return A(s,{received:s.data,code:x.invalid_enum_value,options:i}),L}return ie(e.data)}get enum(){return this._def.values}}Ge=new WeakMap;ct.create=(n,e)=>new ct({values:n,typeName:P.ZodNativeEnum,...R(e)});class Ze extends j{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==C.promise&&t.common.async===!1)return A(t,{code:x.invalid_type,expected:C.promise,received:t.parsedType}),L;const s=t.parsedType===C.promise?t.data:Promise.resolve(t.data);return ie(s.then(i=>this._def.type.parseAsync(i,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Ze.create=(n,e)=>new Ze({type:n,typeName:P.ZodPromise,...R(e)});class he extends j{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===P.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:s}=this._processInputParams(e),i=this._def.effect||null,r={addIssue:a=>{A(s,a),a.fatal?t.abort():t.dirty()},get path(){return s.path}};if(r.addIssue=r.addIssue.bind(r),i.type==="preprocess"){const a=i.transform(s.data,r);if(s.common.async)return Promise.resolve(a).then(async o=>{if(t.value==="aborted")return L;const u=await this._def.schema._parseAsync({data:o,path:s.path,parent:s});return u.status==="aborted"?L:u.status==="dirty"||t.value==="dirty"?Me(u.value):u});{if(t.value==="aborted")return L;const o=this._def.schema._parseSync({data:a,path:s.path,parent:s});return o.status==="aborted"?L:o.status==="dirty"||t.value==="dirty"?Me(o.value):o}}if(i.type==="refinement"){const a=o=>{const u=i.refinement(o,r);if(s.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(s.common.async===!1){const o=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return o.status==="aborted"?L:(o.status==="dirty"&&t.dirty(),a(o.value),{status:t.value,value:o.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(o=>o.status==="aborted"?L:(o.status==="dirty"&&t.dirty(),a(o.value).then(()=>({status:t.value,value:o.value}))))}if(i.type==="transform")if(s.common.async===!1){const a=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!Qe(a))return a;const o=i.transform(a.value,r);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:o}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(a=>Qe(a)?Promise.resolve(i.transform(a.value,r)).then(o=>({status:t.value,value:o})):a);V.assertNever(i)}}he.create=(n,e,t)=>new he({schema:n,typeName:P.ZodEffects,effect:e,...R(t)});he.createWithPreprocess=(n,e,t)=>new he({schema:e,effect:{type:"preprocess",transform:n},typeName:P.ZodEffects,...R(t)});class ve extends j{_parse(e){return this._getType(e)===C.undefined?ie(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ve.create=(n,e)=>new ve({innerType:n,typeName:P.ZodOptional,...R(e)});class Le extends j{_parse(e){return this._getType(e)===C.null?ie(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Le.create=(n,e)=>new Le({innerType:n,typeName:P.ZodNullable,...R(e)});class lt extends j{_parse(e){const{ctx:t}=this._processInputParams(e);let s=t.data;return t.parsedType===C.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}lt.create=(n,e)=>new lt({innerType:n,typeName:P.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...R(e)});class ut extends j{_parse(e){const{ctx:t}=this._processInputParams(e),s={...t,common:{...t.common,issues:[]}},i=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return Xe(i)?i.then(r=>({status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new oe(s.common.issues)},input:s.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new oe(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}ut.create=(n,e)=>new ut({innerType:n,typeName:P.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...R(e)});class Tt extends j{_parse(e){if(this._getType(e)!==C.nan){const s=this._getOrReturnCtx(e);return A(s,{code:x.invalid_type,expected:C.nan,received:s.parsedType}),L}return{status:"valid",value:e.data}}}Tt.create=n=>new Tt({typeName:P.ZodNaN,...R(n)});const Hn=Symbol("zod_brand");class ls extends j{_parse(e){const{ctx:t}=this._processInputParams(e),s=t.data;return this._def.type._parse({data:s,path:t.path,parent:t})}unwrap(){return this._def.type}}class pt extends j{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{const r=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return r.status==="aborted"?L:r.status==="dirty"?(t.dirty(),Me(r.value)):this._def.out._parseAsync({data:r.value,path:s.path,parent:s})})();{const i=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return i.status==="aborted"?L:i.status==="dirty"?(t.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:s.path,parent:s})}}static create(e,t){return new pt({in:e,out:t,typeName:P.ZodPipeline})}}class dt extends j{_parse(e){const t=this._def.innerType._parse(e),s=i=>(Qe(i)&&(i.value=Object.freeze(i.value)),i);return Xe(t)?t.then(i=>s(i)):s(t)}unwrap(){return this._def.innerType}}dt.create=(n,e)=>new dt({innerType:n,typeName:P.ZodReadonly,...R(e)});function Xs(n,e={},t){return n?Fe.create().superRefine((s,i)=>{var r,a;if(!n(s)){const o=typeof e=="function"?e(s):typeof e=="string"?{message:e}:e,u=(a=(r=o.fatal)!==null&&r!==void 0?r:t)!==null&&a!==void 0?a:!0,h=typeof o=="string"?{message:o}:o;i.addIssue({code:"custom",...h,fatal:u})}}):Fe.create()}const Jn={object:G.lazycreate};var P;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(P||(P={}));const Gn=(n,e={message:`Input not instance of ${n.name}`})=>Xs(t=>t instanceof n,e),en=ue.create,tn=Ce.create,Yn=Tt.create,Qn=Te.create,sn=et.create,Xn=Ie.create,ei=kt.create,ti=tt.create,si=st.create,ni=Fe.create,ii=Ee.create,ri=ke.create,ai=At.create,oi=de.create,ci=G.create,li=G.strictCreate,ui=nt.create,di=Dt.create,hi=it.create,fi=ye.create,pi=rt.create,gi=Ct.create,mi=Re.create,vi=Ue.create,bi=at.create,yi=ot.create,wi=Pe.create,xi=ct.create,Si=Ze.create,ks=he.create,_i=ve.create,ki=Le.create,Ai=he.createWithPreprocess,Ci=pt.create,Ti=()=>en().optional(),Pi=()=>tn().optional(),Li=()=>sn().optional(),Oi={string:n=>ue.create({...n,coerce:!0}),number:n=>Ce.create({...n,coerce:!0}),boolean:n=>et.create({...n,coerce:!0}),bigint:n=>Te.create({...n,coerce:!0}),date:n=>Ie.create({...n,coerce:!0})},Ei=L;var v=Object.freeze({__proto__:null,defaultErrorMap:ze,setErrorMap:En,getErrorMap:xt,makeIssue:St,EMPTY_PATH:In,addIssueToContext:A,ParseStatus:te,INVALID:L,DIRTY:Me,OK:ie,isAborted:es,isDirty:ts,isValid:Qe,isAsync:Xe,get util(){return V},get objectUtil(){return Xt},ZodParsedType:C,getParsedType:Ae,ZodType:j,datetimeRegex:Ys,ZodString:ue,ZodNumber:Ce,ZodBigInt:Te,ZodBoolean:et,ZodDate:Ie,ZodSymbol:kt,ZodUndefined:tt,ZodNull:st,ZodAny:Fe,ZodUnknown:Ee,ZodNever:ke,ZodVoid:At,ZodArray:de,ZodObject:G,ZodUnion:nt,ZodDiscriminatedUnion:Dt,ZodIntersection:it,ZodTuple:ye,ZodRecord:rt,ZodMap:Ct,ZodSet:Re,ZodFunction:Ue,ZodLazy:at,ZodLiteral:ot,ZodEnum:Pe,ZodNativeEnum:ct,ZodPromise:Ze,ZodEffects:he,ZodTransformer:he,ZodOptional:ve,ZodNullable:Le,ZodDefault:lt,ZodCatch:ut,ZodNaN:Tt,BRAND:Hn,ZodBranded:ls,ZodPipeline:pt,ZodReadonly:dt,custom:Xs,Schema:j,ZodSchema:j,late:Jn,get ZodFirstPartyTypeKind(){return P},coerce:Oi,any:ni,array:oi,bigint:Qn,boolean:sn,date:Xn,discriminatedUnion:di,effect:ks,enum:wi,function:vi,instanceof:Gn,intersection:hi,lazy:bi,literal:yi,map:gi,nan:Yn,nativeEnum:xi,never:ri,null:si,nullable:ki,number:tn,object:ci,oboolean:Li,onumber:Pi,optional:_i,ostring:Ti,pipeline:Ci,preprocess:Ai,promise:Si,record:pi,set:mi,strictObject:li,string:en,symbol:ei,transformer:ks,tuple:fi,undefined:ti,union:ui,unknown:ii,void:ai,NEVER:Ei,ZodIssueCode:x,quotelessJson:On,ZodError:oe});class fe{constructor(e){this.schema=e}getDefaultValue(){return this.schema._def.defaultValue()}validate(e){return this.schema.safeParse(e).success}safeParse(e){return this.schema.safeParse(e)}safeParseWithDefaults(e){const t=this.safeParse(e),s=this.getDefaultValue();return t.success?Object.assign(s,t.data):s}getPropDescription(e){return this.schema._def.innerType.shape[e].description}}class Uo{constructor(e){Z(this,"type");Z(this,"available",!1);Z(this,"bootResolve");Z(this,"bootReject");Z(this,"bootPromise");this.type=e,this.bootResolve=()=>{},this.bootReject=()=>{},this.bootPromise=new Promise((t,s)=>{this.bootResolve=()=>{this.available=!0,t()},this.bootReject=()=>{this.available=!1,s()}})}}const Ii=v.object({group:v.number(),slug:v.string()}),Ri=v.object({experiment:Ii.optional().describe(U.session)}).default({}),Ni=new fe(Ri);class ji extends ce{constructor(t){super();Z(this,"services",new Map);this.analyticsStateStorage=t}async boot(){await this.analyticsStateStorage.sync(),this.bootResolve(),await this.bootPromise}get experiment(){return this.analyticsStateStorage.state.experiment??null}use(t){this.services.has(t.type)||this.services.set(t.type,t)}sendEvent(t){const s=this.services.get(t.type);s==null||s.send(t).catch(()=>{})}async setExperiment(t){await this.analyticsStateStorage.setItems({experiment:t})}}const Di=new re("analytics",Ni),$t=new ji(Di),Jt="https://veepn.com/",As="udid",$i=["local","cookie","new"],Mi=v.object({type:v.enum($i),value:v.string()}),Vi=v.object({criticalError:v.boolean().describe(U.persist),udid:Mi.describe(U.persist),hasInternetConnection:v.boolean().describe(U.session)}).default({criticalError:!1,udid:{type:"new",value:""},hasInternetConnection:navigator.onLine}),Ui=new fe(Vi);class zi extends ce{constructor(t){super();Z(this,"glogalBootResolve");Z(this,"appBooted");this.globalStateStorage=t,this.glogalBootResolve=()=>{},this.appBooted=new Promise(s=>{this.glogalBootResolve=s})}get udid(){return this.globalStateStorage.state.udid}get criticalError(){return this.globalStateStorage.state.criticalError}get hasInternetConnection(){return this.globalStateStorage.state.hasInternetConnection}async boot(){await this.globalStateStorage.sync();const t=await this.generateUdid();await this.setUdid(t),this.bootResolve(),await this.bootPromise}globalboot(){this.glogalBootResolve()}async setCriticalError(t){await this.globalStateStorage.setItems({criticalError:t})}async setUdid(t){await this.setCookiesUdid(t.value),await this.globalStateStorage.setItems({udid:t})}async setHasInternetConnection(t){await this.globalStateStorage.setItems({hasInternetConnection:t})}async generateUdid(){const{udid:t}=await this.globalStateStorage.getItems("udid");if(t.value)return{type:"local",value:t.value};const s=await H.cookies.get({url:Jt,name:"udid"});return s!=null&&s.value?{type:"cookie",value:s.value}:{type:"new",value:Ws()}}async setCookiesUdid(t){const s=new URL(Jt),i=new Date;i.setFullYear(i.getFullYear()+1),await H.cookies.set({name:As,value:t,url:s.href,domain:`.${s.hostname}`,expirationDate:i.getTime()/1e3})}async getCookiesUdid(){const t=new URL(Jt),s=await H.cookies.get({name:As,url:t.href});return s==null?void 0:s.value}}const Fi=new re("global-state",Ui),Mt=new zi(Fi),Cs="chrome",Ts="app",Ps="chrome_extension",Gt={home:"https://veepn.com/",pricing:"https://order.veepn.com/pricing/extension/",install:`https://veepn.com/welcome/${Cs}/`,uninstall:`https://veepn.com/uninstall/${Cs}/1/`,ipDetails:"https://veepn.com/what-is-my-ip/",support:"https://support.veepn.com/",privacyPolicy:"https://veepn.com/privacy-policy/",termsOfService:"https://veepn.com/terms-of-service/",accountAuth:"https://veepn.com/account-auth/"};class Zi extends ce{constructor(e){super(),this.globalStateService=e}async boot(){const e=this.globalStateService.udid.value;await this.setUninstallURL(e),this.bootResolve(),await this.bootPromise}async proceedToWebsiteAccount(e){await Promise.resolve(this);const t=`${Gt.accountAuth}${e.authToken}/`;await H.tabs.create({url:t})}async proceedToWebsitePage(e){await Promise.resolve(this);const t={utm_source:Ps,utm_medium:Ts,...e.params??{}},s=new URL(Gt[e.page]);Object.entries(t).forEach(([i,r])=>{s.searchParams.set(i,r)}),await H.tabs.create({url:s.toString()})}async setUninstallURL(e){await Promise.resolve(this);const t={utm_source:Ps,utm_medium:Ts,utm_campaign:e},s=new URL(Gt.uninstall);Object.entries(t).forEach(([i,r])=>{s.searchParams.set(i,r)}),await H.runtime.setUninstallURL(s.toString())}}const Bi=new Zi(Mt);function Ki(n){return!!(typeof n=="object"&&n!==null&&"errors"in n&&Array.isArray(n.errors))}function Wi(n){return typeof n=="object"&&n!==null&&"success"in n&&"data"in n}function qi(n){return typeof n=="object"&&n!==null&&"name"in n&&"message"in n&&"code"in n}class Oe{constructor(){Z(this,"ABORT_FETCH_TIME",5e3)}async request(e){try{const t=new AbortController,s=e.timeout??this.ABORT_FETCH_TIME,i=setTimeout(()=>t.abort(),s),r=await fetch(e.url,{signal:t.signal,method:e.method,headers:{Accept:"application/json","Content-Type":"application/json",...e.headers??{}},...e.body?{body:JSON.stringify(e.body)}:{}});if(clearTimeout(i),!r.ok)throw r;const a=r.headers.get("content-type"),o=a!=null&&a.includes("application/json")?await r.json():await r.text();return Wi(o)?o:{success:!0,data:o}}catch(t){if(t instanceof Response)try{const s=await t.json();return Ki(s)?s:{success:!1,errors:[{name:"fetch",message:`Fetch error at ${e.url}. ${t.statusText}`,status:t.status,code:1}]}}catch{return{success:!1,errors:[{name:"fetch",message:`Fetch error at ${e.url}. ${t.statusText}`,status:t.status,code:2}]}}return qi(t)?{success:!1,errors:[{name:t.name,message:"Server take long time to response. Please, try again or contact us for assistance.",status:0,code:t.code}]}:{success:!1,errors:[{name:"custom",message:`Fetch error at ${e.url}`,status:0,code:4}]}}}static getStatusCodeMessage(e){var s,i,r,a;return(((s=e.errors[0])==null?void 0:s.status)||((i=e.errors[0])==null?void 0:i.message)||((r=e.errors[0])==null?void 0:r.name)||((a=e.errors[0])==null?void 0:a.code)||"unknown").toString()}}const Vt=new Oe,nn="default",Hi=[nn,"light","dark"],Ji=14*24*60*60*1e3,Gi="app",Yi="chrome_extension",Qi={macos:"https://download.veepn.com/mac/VeePN.dmg",windows:"https://download.veepn.com/windows/VeePNInstaller.exe",linux:"https://veepn.com/vpn-apps/vpn-for-linux/",other:`https://order.veepn.com/pricing/extension/?utm_source=${Yi}&utm_medium=${Gi}&utm_campaign=download`},Xi=7*24*60*60*1e3,er="https://www.cloudflare.com/cdn-cgi/trace",tr=v.object({country:v.string(),region:v.string()}),sr=v.object({colorTheme:v.enum(Hi).describe(U.persist),showOnboarding:v.boolean().describe(U.persist),sessionCount:v.number().describe(U.persist),premiumBannerTimestamp:v.number().describe(U.persist),downloadNotificationTimestamp:v.number().describe(U.persist),geolocation:tr.optional().describe(U.persist),blockAds:v.boolean().describe(U.persist)}).default({colorTheme:nn,showOnboarding:!0,sessionCount:0,premiumBannerTimestamp:0,downloadNotificationTimestamp:0,blockAds:!1}),nr=new fe(sr);var ns={exports:{}};(function(n,e){(function(t,s){var i="1.0.38",r="",a="?",o="function",u="undefined",h="object",g="string",w="major",d="model",p="name",c="type",l="vendor",f="version",m="architecture",y="console",b="mobile",S="tablet",M="smarttv",_="wearable",k="embedded",N=500,D="Amazon",K="Apple",Y="ASUS",X="BlackBerry",O="Browser",J="Chrome",W="Edge",ee="Firefox",ae="Google",B="Huawei",ne="LG",we="Microsoft",Be="Motorola",Ke="Opera",gt="Samsung",ps="Sharp",mt="Sony",Zt="Xiaomi",Bt="Zebra",gs="Facebook",ms="Chromium OS",vs="Mac OS",yn=function($,F){var I={};for(var q in $)F[q]&&F[q].length%2===0?I[q]=F[q].concat($[q]):I[q]=$[q];return I},vt=function($){for(var F={},I=0;I<$.length;I++)F[$[I].toUpperCase()]=$[I];return F},bs=function($,F){return typeof $===g?We(F).indexOf(We($))!==-1:!1},We=function($){return $.toLowerCase()},wn=function($){return typeof $===g?$.replace(/[^\d\.]/g,r).split(".")[0]:s},Kt=function($,F){if(typeof $===g)return $=$.replace(/^\s\s*/,r),typeof F===u?$:$.substring(0,N)},qe=function($,F){for(var I=0,q,xe,pe,z,E,ge;I<F.length&&!E;){var qt=F[I],xs=F[I+1];for(q=xe=0;q<qt.length&&!E&&qt[q];)if(E=qt[q++].exec($),E)for(pe=0;pe<xs.length;pe++)ge=E[++xe],z=xs[pe],typeof z===h&&z.length>0?z.length===2?typeof z[1]==o?this[z[0]]=z[1].call(this,ge):this[z[0]]=z[1]:z.length===3?typeof z[1]===o&&!(z[1].exec&&z[1].test)?this[z[0]]=ge?z[1].call(this,ge,z[2]):s:this[z[0]]=ge?ge.replace(z[1],z[2]):s:z.length===4&&(this[z[0]]=ge?z[3].call(this,ge.replace(z[1],z[2])):s):this[z]=ge||s;I+=2}},Wt=function($,F){for(var I in F)if(typeof F[I]===h&&F[I].length>0){for(var q=0;q<F[I].length;q++)if(bs(F[I][q],$))return I===a?s:I}else if(bs(F[I],$))return I===a?s:I;return $},xn={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},ys={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},ws={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[f,[p,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[f,[p,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[p,f],[/opios[\/ ]+([\w\.]+)/i],[f,[p,Ke+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[f,[p,Ke+" GX"]],[/\bopr\/([\w\.]+)/i],[f,[p,Ke]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[f,[p,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[p,f],[/\bddg\/([\w\.]+)/i],[f,[p,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[f,[p,"UC"+O]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[f,[p,"WeChat"]],[/konqueror\/([\w\.]+)/i],[f,[p,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[f,[p,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[f,[p,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[f,[p,"Smart Lenovo "+O]],[/(avast|avg)\/([\w\.]+)/i],[[p,/(.+)/,"$1 Secure "+O],f],[/\bfocus\/([\w\.]+)/i],[f,[p,ee+" Focus"]],[/\bopt\/([\w\.]+)/i],[f,[p,Ke+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[f,[p,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[f,[p,"Dolphin"]],[/coast\/([\w\.]+)/i],[f,[p,Ke+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[f,[p,"MIUI "+O]],[/fxios\/([-\w\.]+)/i],[f,[p,ee]],[/\bqihu|(qi?ho?o?|360)browser/i],[[p,"360 "+O]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[p,/(.+)/,"$1 "+O],f],[/samsungbrowser\/([\w\.]+)/i],[f,[p,gt+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[p,/_/g," "],f],[/metasr[\/ ]?([\d\.]+)/i],[f,[p,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[p,"Sogou Mobile"],f],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[p,f],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[p],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[p,gs],f],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[p,f],[/\bgsa\/([\w\.]+) .*safari\//i],[f,[p,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[f,[p,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[f,[p,J+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[p,J+" WebView"],f],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[f,[p,"Android "+O]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[p,f],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[f,[p,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[f,p],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[p,[f,Wt,xn]],[/(webkit|khtml)\/([\w\.]+)/i],[p,f],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[p,"Netscape"],f],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[f,[p,ee+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[p,f],[/(cobalt)\/([\w\.]+)/i],[p,[f,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[m,"amd64"]],[/(ia32(?=;))/i],[[m,We]],[/((?:i[346]|x)86)[;\)]/i],[[m,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[m,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[m,"armhf"]],[/windows (ce|mobile); ppc;/i],[[m,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[m,/ower/,r,We]],[/(sun4\w)[;\)]/i],[[m,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[m,We]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[d,[l,gt],[c,S]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[d,[l,gt],[c,b]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[d,[l,K],[c,b]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[d,[l,K],[c,S]],[/(macintosh);/i],[d,[l,K]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[d,[l,ps],[c,b]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[d,[l,B],[c,S]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[d,[l,B],[c,b]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[d,/_/g," "],[l,Zt],[c,b]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[d,/_/g," "],[l,Zt],[c,S]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[d,[l,"OPPO"],[c,b]],[/\b(opd2\d{3}a?) bui/i],[d,[l,"OPPO"],[c,S]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[d,[l,"Vivo"],[c,b]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[d,[l,"Realme"],[c,b]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[d,[l,Be],[c,b]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[d,[l,Be],[c,S]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[d,[l,ne],[c,S]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[d,[l,ne],[c,b]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[d,[l,"Lenovo"],[c,S]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[d,/_/g," "],[l,"Nokia"],[c,b]],[/(pixel c)\b/i],[d,[l,ae],[c,S]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[d,[l,ae],[c,b]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[d,[l,mt],[c,b]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[d,"Xperia Tablet"],[l,mt],[c,S]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[d,[l,"OnePlus"],[c,b]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[d,[l,D],[c,S]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[d,/(.+)/g,"Fire Phone $1"],[l,D],[c,b]],[/(playbook);[-\w\),; ]+(rim)/i],[d,l,[c,S]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[d,[l,X],[c,b]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[d,[l,Y],[c,S]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[d,[l,Y],[c,b]],[/(nexus 9)/i],[d,[l,"HTC"],[c,S]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[l,[d,/_/g," "],[c,b]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[d,[l,"Acer"],[c,S]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[d,[l,"Meizu"],[c,b]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[d,[l,"Ulefone"],[c,b]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[l,d,[c,b]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[l,d,[c,S]],[/(surface duo)/i],[d,[l,we],[c,S]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[d,[l,"Fairphone"],[c,b]],[/(u304aa)/i],[d,[l,"AT&T"],[c,b]],[/\bsie-(\w*)/i],[d,[l,"Siemens"],[c,b]],[/\b(rct\w+) b/i],[d,[l,"RCA"],[c,S]],[/\b(venue[\d ]{2,7}) b/i],[d,[l,"Dell"],[c,S]],[/\b(q(?:mv|ta)\w+) b/i],[d,[l,"Verizon"],[c,S]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[d,[l,"Barnes & Noble"],[c,S]],[/\b(tm\d{3}\w+) b/i],[d,[l,"NuVision"],[c,S]],[/\b(k88) b/i],[d,[l,"ZTE"],[c,S]],[/\b(nx\d{3}j) b/i],[d,[l,"ZTE"],[c,b]],[/\b(gen\d{3}) b.+49h/i],[d,[l,"Swiss"],[c,b]],[/\b(zur\d{3}) b/i],[d,[l,"Swiss"],[c,S]],[/\b((zeki)?tb.*\b) b/i],[d,[l,"Zeki"],[c,S]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[l,"Dragon Touch"],d,[c,S]],[/\b(ns-?\w{0,9}) b/i],[d,[l,"Insignia"],[c,S]],[/\b((nxa|next)-?\w{0,9}) b/i],[d,[l,"NextBook"],[c,S]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[l,"Voice"],d,[c,b]],[/\b(lvtel\-)?(v1[12]) b/i],[[l,"LvTel"],d,[c,b]],[/\b(ph-1) /i],[d,[l,"Essential"],[c,b]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[d,[l,"Envizen"],[c,S]],[/\b(trio[-\w\. ]+) b/i],[d,[l,"MachSpeed"],[c,S]],[/\btu_(1491) b/i],[d,[l,"Rotor"],[c,S]],[/(shield[\w ]+) b/i],[d,[l,"Nvidia"],[c,S]],[/(sprint) (\w+)/i],[l,d,[c,b]],[/(kin\.[onetw]{3})/i],[[d,/\./g," "],[l,we],[c,b]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[d,[l,Bt],[c,S]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[d,[l,Bt],[c,b]],[/smart-tv.+(samsung)/i],[l,[c,M]],[/hbbtv.+maple;(\d+)/i],[[d,/^/,"SmartTV"],[l,gt],[c,M]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[l,ne],[c,M]],[/(apple) ?tv/i],[l,[d,K+" TV"],[c,M]],[/crkey/i],[[d,J+"cast"],[l,ae],[c,M]],[/droid.+aft(\w+)( bui|\))/i],[d,[l,D],[c,M]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[d,[l,ps],[c,M]],[/(bravia[\w ]+)( bui|\))/i],[d,[l,mt],[c,M]],[/(mitv-\w{5}) bui/i],[d,[l,Zt],[c,M]],[/Hbbtv.*(technisat) (.*);/i],[l,d,[c,M]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[l,Kt],[d,Kt],[c,M]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[c,M]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[l,d,[c,y]],[/droid.+; (shield) bui/i],[d,[l,"Nvidia"],[c,y]],[/(playstation [345portablevi]+)/i],[d,[l,mt],[c,y]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[d,[l,we],[c,y]],[/((pebble))app/i],[l,d,[c,_]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[d,[l,K],[c,_]],[/droid.+; (glass) \d/i],[d,[l,ae],[c,_]],[/droid.+; (wt63?0{2,3})\)/i],[d,[l,Bt],[c,_]],[/(quest( \d| pro)?)/i],[d,[l,gs],[c,_]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[l,[c,k]],[/(aeobc)\b/i],[d,[l,D],[c,k]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[d,[c,b]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[d,[c,S]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[c,S]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[c,b]],[/(android[-\w\. ]{0,9});.+buil/i],[d,[l,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[f,[p,W+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[f,[p,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[p,f],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[f,p]],os:[[/microsoft (windows) (vista|xp)/i],[p,f],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[p,[f,Wt,ys]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[f,Wt,ys],[p,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[f,/_/g,"."],[p,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[p,vs],[f,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[f,p],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[p,f],[/\(bb(10);/i],[f,[p,X]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[f,[p,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[f,[p,ee+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[f,[p,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[f,[p,"watchOS"]],[/crkey\/([\d\.]+)/i],[f,[p,J+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[p,ms],f],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[p,f],[/(sunos) ?([\w\.\d]*)/i],[[p,"Solaris"],f],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[p,f]]},le=function($,F){if(typeof $===h&&(F=$,$=s),!(this instanceof le))return new le($,F).getResult();var I=typeof t!==u&&t.navigator?t.navigator:s,q=$||(I&&I.userAgent?I.userAgent:r),xe=I&&I.userAgentData?I.userAgentData:s,pe=F?yn(ws,F):ws,z=I&&I.userAgent==q;return this.getBrowser=function(){var E={};return E[p]=s,E[f]=s,qe.call(E,q,pe.browser),E[w]=wn(E[f]),z&&I&&I.brave&&typeof I.brave.isBrave==o&&(E[p]="Brave"),E},this.getCPU=function(){var E={};return E[m]=s,qe.call(E,q,pe.cpu),E},this.getDevice=function(){var E={};return E[l]=s,E[d]=s,E[c]=s,qe.call(E,q,pe.device),z&&!E[c]&&xe&&xe.mobile&&(E[c]=b),z&&E[d]=="Macintosh"&&I&&typeof I.standalone!==u&&I.maxTouchPoints&&I.maxTouchPoints>2&&(E[d]="iPad",E[c]=S),E},this.getEngine=function(){var E={};return E[p]=s,E[f]=s,qe.call(E,q,pe.engine),E},this.getOS=function(){var E={};return E[p]=s,E[f]=s,qe.call(E,q,pe.os),z&&!E[p]&&xe&&xe.platform&&xe.platform!="Unknown"&&(E[p]=xe.platform.replace(/chrome os/i,ms).replace(/macos/i,vs)),E},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return q},this.setUA=function(E){return q=typeof E===g&&E.length>N?Kt(E,N):E,this},this.setUA(q),this};le.VERSION=i,le.BROWSER=vt([p,f,w]),le.CPU=vt([m]),le.DEVICE=vt([d,l,c,y,b,M,S,_,k]),le.ENGINE=le.OS=vt([p,f]),n.exports&&(e=n.exports=le),e.UAParser=le;var Ne=typeof t!==u&&(t.jQuery||t.Zepto);if(Ne&&!Ne.ua){var bt=new le;Ne.ua=bt.getResult(),Ne.ua.get=function(){return bt.getUA()},Ne.ua.set=function($){bt.setUA($);var F=bt.getResult();for(var I in F)Ne.ua[I]=F[I]}}})(typeof window=="object"?window:cs)})(ns,ns.exports);var us=ns.exports;const ir=us.UAParser();class rr extends ce{constructor(e,t,s){super(),this.appStorage=e,this.fetchService=t,this.analyticsService=s}get colorTheme(){return this.appStorage.state.colorTheme}get version(){return H.runtime.getManifest().version}get showOnboarding(){return this.appStorage.state.showOnboarding}get sessionCount(){return this.appStorage.state.sessionCount}get premiumBannerTimestamp(){return this.appStorage.state.premiumBannerTimestamp}get downloadNotificationTimestamp(){return this.appStorage.state.downloadNotificationTimestamp}get geolocation(){return this.appStorage.state.geolocation??null}get isBlockAds(){return this.appStorage.state.blockAds}get majorBrowserVersion(){const e=Number(ir.browser.major);return Number.isNaN(e)?0:e}async boot(){await this.appStorage.sync(),this.appStorage.state.premiumBannerTimestamp===0&&await this.incrementPremiumBannerTimestamp(),this.appStorage.state.geolocation||await this.detectGeolocation(),this.bootResolve(),await this.bootPromise}async setColorTheme(e){await this.appStorage.setItems({colorTheme:e})}async setShowOnboarding(e){await this.appStorage.setItems({showOnboarding:e})}async incrementSessionCount(){const e=this.appStorage.state.sessionCount+1;await this.appStorage.setItems({sessionCount:e})}async incrementPremiumBannerTimestamp(){const e=new Date;e.setTime(e.getTime()+Ji);const t=e.getTime();await this.appStorage.setItems({premiumBannerTimestamp:t})}async getDownloadLink(e){return await Promise.resolve(this),Qi[e]}async incrementDownloadNotificationTimestamp(){const e=new Date;e.setTime(e.getTime()+Xi);const t=e.getTime();await this.appStorage.setItems({downloadNotificationTimestamp:t})}async detectGeolocation(){const e=await this.fetchService.request({method:"GET",url:er});if(e.success)try{const t=e.data.trim().split(/\n/).map(r=>r.split("=")),s=Object.fromEntries(t),i={country:s.loc.toLocaleLowerCase(),region:s.colo.toLocaleLowerCase()};await this.appStorage.setItems({geolocation:i}),this.analyticsService.sendEvent({type:"google-analytics",name:"setup_user_country",data:{user_country:i.country}})}catch{this.analyticsService.sendEvent({type:"google-analytics",name:"country_check_failed_error"})}else this.analyticsService.sendEvent({type:"google-analytics",name:"country_check_failed"})}async setBlockAds(e){await this.appStorage.setItems({blockAds:e})}}const ar=new re("app",nr),or=new rr(ar,Vt,$t),cr=["allowed","denied"],lr="allowed",ur="/icons/128.png",dr=["download-app","extension-updated"],hr=v.object({id:v.string().uuid(),callback:v.enum(dr).optional()}),fr=v.object({permition:v.enum(cr).describe(U.persist),callbacks:v.array(hr).describe(U.session)}).default({permition:lr,callbacks:[]}),pr=new fe(fr);class gr extends ce{constructor(e){super(),this.notificationStorage=e}get permition(){return this.notificationStorage.state.permition}async boot(){await this.notificationStorage.sync(),this.bootResolve(),await this.bootPromise}async setNotificationPermition(e){await this.notificationStorage.setItems({permition:e})}getCallbackSettings(e){return this.notificationStorage.state.callbacks.find(s=>s.id===e)??null}async removeCallbackSettings(e){const s=(await this.notificationStorage.getItems("callbacks")).callbacks.filter(i=>i.id!==e);await this.notificationStorage.setItems({callbacks:s})}async notify(e){if(this.notificationStorage.state.permition==="denied")return;const t=H.runtime.getManifest(),s=H.runtime.getURL(ur),i={type:"basic",title:t.name,message:t.description??"",iconUrl:s},r=await H.notifications.create(Ws(),{...i,...e.options}),a=[...this.notificationStorage.state.callbacks,{id:r,...e.callback?{callback:e.callback}:{}}];await this.notificationStorage.setItems({callbacks:a})}}const mr=new re("notification",pr),vr=new gr(mr),rn=["en","ru","vi","uk","pl","no","it","he","fr","fi","nl","da","bg","es","de","zh_CN","ar","hi","bn","ta"],Yt="en",br=new Map([["en","English"],["ru",""],["vi","Ting Vit"],["uk",""],["pl","Polskie"],["no","Norsk"],["it","Italiano"],["he",""],["fr","Franais"],["fi","Suomalainen"],["nl","Nederlands"],["da","Dansk"],["bg",""],["es","Espaol"],["de","Deutsche"],["zh_CN",""],["ar",""],["hi",""],["bn",""],["ta",""]]),yr=v.object({locale:v.enum(rn).optional().describe(U.persist)}).default({}),wr=new fe(yr);function Ls(n){return!!(n&&typeof n=="string"&&rn.includes(n))}const xr={"connect-status":{off:"  ",on:"   {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":"     .","not-controllable":"       .","no-location":"     .","server-config":"       .",captive:"      .","no-internet":"      ."},"disconnect-errors":{"remove-proxy":"        ."},"download-notification":{title:"  VPN  ",message:"      "},"update-notification":{title:"  ",message:"   {{tr_version}}"}},Sr=Object.freeze(Object.defineProperty({__proto__:null,default:xr},Symbol.toStringTag,{value:"Module"})),_r={"connect-status":{off:"  ",on:"   {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":"  , ,   .","not-controllable":"  ,        .","no-location":"  ,    .","server-config":"  ,        .",captive:"  ,       .","no-internet":"  ,   ."},"disconnect-errors":{"remove-proxy":"    ,      ."},"download-notification":{title:"      VPN",message:"     ,     "},"update-notification":{title:"  ",message:"   {{tr_version}}"}},kr=Object.freeze(Object.defineProperty({__proto__:null,default:_r},Symbol.toStringTag,{value:"Module"})),Ar={"connect-status":{off:"  ",on:"   {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":"  ,      ","not-controllable":"  ,    ","no-location":" ,   .","server-config":" ,     ",captive:"  ,      ","no-internet":" ,    ."},"disconnect-errors":{"remove-proxy":"  ,     "},"download-notification":{title:"     ",message:"  ,      "},"update-notification":{title:"   ",message:" {{tr_version}}"}},Cr=Object.freeze(Object.defineProperty({__proto__:null,default:Ar},Symbol.toStringTag,{value:"Module"})),Tr={"connect-status":{off:"Du er ikke forbundet",on:"Du er forbundet til {{tr_location}}."},"connect-errors":{"controlled-by-other-extensions":"Forbindelsen mislykkedes. Deaktiver venligst andre udvidelser.","not-controllable":"Forbindelsen mislykkedes, browserproxy kan ikke kontrolleres.","no-location":"Forbindelsesfejl, manglende forbindelsesplacering.","server-config":"Forbindelsesfejl, serverkonfigurationen kan ikke hentes.",captive:"Forbindelsen mislykkedes, kan ikke oprette proxyforbindelse.","no-internet":"Forbindelsesfejl, ingen netvrksforbindelse."},"disconnect-errors":{"remove-proxy":"Afbrydelsesfejl, fjernelse af proxyregler mislykkedes."},"download-notification":{title:"Prv vores VPN-klient til skrivebordet",message:"Beskyt hele din internetforbindelse, ikke kun browseren"},"update-notification":{title:"Udvidelse opdateret",message:"Velkommen til {{tr_version}}"}},Pr=Object.freeze(Object.defineProperty({__proto__:null,default:Tr},Symbol.toStringTag,{value:"Module"})),Lr={"connect-status":{off:"Sie sind nicht verbunden",on:"Sie sind mit {{tr_location}} verbunden"},"connect-errors":{"controlled-by-other-extensions":"Die Verbindung ist fehlgeschlagen. Bitte deaktivieren Sie andere Erweiterungen.","not-controllable":"Verbindung fehlgeschlagen, Browser-Proxy ist nicht steuerbar.","no-location":"Verbindungsfehler, Verbindungsstandort fehlt.","server-config":"Verbindungsfehler, Serverkonfiguration kann nicht abgerufen werden.",captive:"Verbindung fehlgeschlagen, Proxy-Verbindung kann nicht hergestellt werden.","no-internet":"Verbindungsfehler, keine Netzwerkverbindung."},"disconnect-errors":{"remove-proxy":"Fehler beim Trennen der Verbindung. Das Entfernen der Proxy-Regeln ist fehlgeschlagen."},"download-notification":{title:"Testen Sie unseren Desktop VPN Client",message:"Schtzen Sie Ihre gesamte Internetverbindung, nicht nur den Browser"},"update-notification":{title:"Erweiterung aktualisiert",message:"Willkommen zu {{tr_version}}"}},Or=Object.freeze(Object.defineProperty({__proto__:null,default:Lr},Symbol.toStringTag,{value:"Module"})),Er={"connect-status":{off:"You are not connected",on:"You are connected to {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":"Connection failed. Please disable other extensions.","not-controllable":"Connection failed. Browser proxy is not controllable.","no-location":"Connection Error. Missing connection location.","server-config":"Connection Error. Can't fetch server config.",captive:"Connection failed. Cannot establish proxy connection.","no-internet":"Connection Error. No Network connection."},"disconnect-errors":{"remove-proxy":"Disconnect Error. Proxy rules remove failed."},"download-notification":{title:"Try our Desktop VPN Client",message:"Protect your entire internet connection, not just browser"},"update-notification":{title:"Extension updated",message:"Welcome to {{tr_version}}"}},Ir=Object.freeze(Object.defineProperty({__proto__:null,default:Er},Symbol.toStringTag,{value:"Module"})),Rr={"connect-status":{off:"No est conectado",on:"Ests conectado a {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":"La conexin fall. Desactive otras extensiones.","not-controllable":"La conexin fall, el proxy del navegador no es controlable.","no-location":"Error de conexin, falta ubicacin de conexin.","server-config":"Error de conexin, no se puede recuperar la configuracin del servidor.",captive:"La conexin fall, no se puede establecer la conexin proxy.","no-internet":"Error de conexin, sin conexin de red."},"disconnect-errors":{"remove-proxy":"Error de desconexin, error al eliminar las reglas de proxy."},"download-notification":{title:"Pruebe nuestro cliente VPN de escritorio",message:"Proteja toda su conexin a Internet, no slo el navegador"},"update-notification":{title:"Extensin actualizada",message:"Bienvenido a {{tr_version}}"}},Nr=Object.freeze(Object.defineProperty({__proto__:null,default:Rr},Symbol.toStringTag,{value:"Module"})),jr={"connect-status":{off:"Et ole yhteydess",on:"Olet yhteydess {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":"Yhteys eponnistui. Poista muut laajennukset kytst.","not-controllable":"Yhteys eponnistui, selaimen vlityspalvelinta ei voida ohjata.","no-location":"Yhteysvirhe, yhteyspaikka puuttuu.","server-config":"Yhteysvirhe, palvelimen konfiguraatiota ei voi noutaa.",captive:"Yhteys eponnistui, vlityspalvelinyhteytt ei voi muodostaa.","no-internet":"Yhteysvirhe, ei verkkoyhteytt."},"disconnect-errors":{"remove-proxy":"Yhteyden katkaisuvirhe, vlityspalvelimen sntjen poistaminen eponnistui."},"download-notification":{title:"Kokeile typydn VPN-asiakasta",message:"Suojaa koko internet-yhteys, ei vain selainta."},"update-notification":{title:"Laajennus pivitetty",message:"Tervetuloa {{tr_version}}"}},Dr=Object.freeze(Object.defineProperty({__proto__:null,default:jr},Symbol.toStringTag,{value:"Module"})),$r={"connect-status":{off:"Vous n'tes pas connect",on:"Vous tes connect  {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":"La connexion a chou. Veuillez dsactiver les autres extensions.","not-controllable":"La connexion a chou, le proxy du navigateur n'est pas contrlable.","no-location":"Erreur de connexion, emplacement de connexion manquant.","server-config":"Erreur de connexion, impossible de rcuprer la configuration du serveur.",captive:"chec de la connexion, impossible d'tablir une connexion proxy.","no-internet":"Erreur de connexion, pas de connexion rseau."},"disconnect-errors":{"remove-proxy":"Erreur de dconnexion. La suppression des rgles de proxy a chou."},"download-notification":{title:"Essayez notre client VPN de bureau",message:"Protgez l'ensemble de votre connexion Internet, et pas seulement votre navigateur"},"update-notification":{title:"Extension mise  jour",message:"Bienvenue  {{tr_version}}"}},Mr=Object.freeze(Object.defineProperty({__proto__:null,default:$r},Symbol.toStringTag,{value:"Module"})),Vr={"connect-status":{off:"  ",on:"   {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":" ,    .","not-controllable":" , -proxy     .","no-location":" ,   .","server-config":" ,      .",captive:" ,     proxy.","no-internet":" ,   ."},"disconnect-errors":{"remove-proxy":" ,   Proxy ."},"download-notification":{title:"   -VPN   ",message:"     ,    "},"update-notification":{title:" ",message:"   {{tr_version}}"}},Ur=Object.freeze(Object.defineProperty({__proto__:null,default:Vr},Symbol.toStringTag,{value:"Module"})),zr={"connect-status":{off:"   ",on:"    {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":" ,     ","not-controllable":" ,     ","no-location":" ,   ","server-config":" ,      ",captive:" ,       ","no-internet":" ,    ."},"disconnect-errors":{"remove-proxy":" ,     "},"download-notification":{title:"     ",message:"   ,        "},"update-notification":{title:"   ",message:"   {{tr_version}}"}},Fr=Object.freeze(Object.defineProperty({__proto__:null,default:zr},Symbol.toStringTag,{value:"Module"})),Zr={"connect-status":{off:"Non siete connessi",on:"Sei connesso a {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":"Connessione non riuscita. Disattiva le altre estensioni.","not-controllable":"Connessione non riuscita, il proxy del browser non  controllabile.","no-location":"Errore di connessione, posizione della connessione mancante.","server-config":"Errore di connessione, impossibile recuperare la configurazione del server.",captive:"Connessione non riuscita, impossibile stabilire una connessione proxy.","no-internet":"Errore di connessione, nessuna connessione di rete."},"disconnect-errors":{"remove-proxy":"Errore di disconnessione, rimozione delle regole proxy non riuscita."},"download-notification":{title:"Provate il nostro client VPN per desktop",message:"Proteggere l'intera connessione a Internet, non solo il browser"},"update-notification":{title:"Estensione aggiornata",message:"Benvenuto a {{tr_version}}"}},Br=Object.freeze(Object.defineProperty({__proto__:null,default:Zr},Symbol.toStringTag,{value:"Module"})),Kr={"connect-status":{off:"U bent niet verbonden",on:"Je bent verbonden met {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":"Verbinding mislukt. Schakel andere extensies uit.","not-controllable":"Verbinding mislukt, browserproxy kan niet worden beheerd.","no-location":"Verbindingsfout, ontbrekende verbindingslocatie.","server-config":"Verbindingsfout, kan serverconfiguratie niet ophalen.",captive:"Verbinding mislukt. Kan geen proxyverbinding tot stand brengen.","no-internet":"Verbindingsfout, geen netwerkverbinding."},"disconnect-errors":{"remove-proxy":"Verbindingsfout, verwijderen van proxyregels mislukt."},"download-notification":{title:"Probeer onze Desktop VPN-client",message:"Bescherm je hele internetverbinding, niet alleen je browser"},"update-notification":{title:"Extensie bijgewerkt",message:"Welkom bij {{tr_version}}"}},Wr=Object.freeze(Object.defineProperty({__proto__:null,default:Kr},Symbol.toStringTag,{value:"Module"})),qr={"connect-status":{off:"Du er ikke tilkoblet",on:"Du er koblet til {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":"Tilkobling mislyktes. Deaktiver andre utvidelser.","not-controllable":"Tilkobling mislyktes, nettleserproxy er ikke kontrollerbar.","no-location":"Tilkoblingsfeil, manglende tilkoblingssted.","server-config":"Tilkoblingsfeil, kan ikke hente serverkonfig.",captive:"Tilkobling mislyktes. Kan ikke opprette proxy-tilkobling.","no-internet":"Tilkoblingsfeil, ingen nettverkstilkobling."},"disconnect-errors":{"remove-proxy":"Koble fra feil, fjerning av proxy-regler mislyktes."},"download-notification":{title:"Prv vr VPN-klient for skrivebordet",message:"Beskytt hele internettforbindelsen din, ikke bare nettleseren"},"update-notification":{title:"Utvidelsen er oppdatert",message:"Velkommen til {{tr_version}}"}},Hr=Object.freeze(Object.defineProperty({__proto__:null,default:qr},Symbol.toStringTag,{value:"Module"})),Jr={"connect-status":{off:"Nie jeste poczony",on:"Jeste poczony z {{tr_location}}."},"connect-errors":{"controlled-by-other-extensions":"Poczenie nie powiodo si. Wycz inne rozszerzenia.","not-controllable":"Poczenie nie powiodo si, nie mona kontrolowa serwera proxy przegldarki.","no-location":"Bd poczenia, brak lokalizacji poczenia.","server-config":"Bd poczenia. Nie mona pobra konfiguracji serwera.",captive:"Poczenie nie powiodo si. Nie mona nawiza poczenia proxy.","no-internet":"Bd poczenia, brak poczenia sieciowego."},"disconnect-errors":{"remove-proxy":"Bd rozczenia, usunicie regu proxy nie powiodo si."},"download-notification":{title:"Wyprbuj naszego klienta VPN dla komputerw stacjonarnych",message:"Ochrona caego poczenia internetowego, nie tylko przegldarki"},"update-notification":{title:"Rozszerzenie zaktualizowane",message:"Witamy w {{tr_version}}"}},Gr=Object.freeze(Object.defineProperty({__proto__:null,default:Jr},Symbol.toStringTag,{value:"Module"})),Yr={"connect-status":{off:"  ",on:"   {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":"  .   .","not-controllable":"  , -   .","no-location":" ,   .","server-config":" .    .",captive:"   .   -.","no-internet":" .    ."},"disconnect-errors":{"remove-proxy":" .     ."},"download-notification":{title:"   VPN-",message:"   -,    "},"update-notification":{title:" ",message:"   {{tr_version}}"}},Qr=Object.freeze(Object.defineProperty({__proto__:null,default:Yr},Symbol.toStringTag,{value:"Module"})),Xr={"connect-status":{off:" ",on:"  {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":" ,   .","not-controllable":" ,    .","no-location":" ,   .","server-config":" ,    .",captive:" ,    .","no-internet":" ,   ."},"disconnect-errors":{"remove-proxy":" ,    ."},"download-notification":{title:"  VPN  ",message:"      "},"update-notification":{title:" ",message:" {{tr_version}}"}},ea=Object.freeze(Object.defineProperty({__proto__:null,default:Xr},Symbol.toStringTag,{value:"Module"})),ta={"connect-status":{off:"  ",on:"   {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":" .   .","not-controllable":" , - -  .","no-location":" ,   .","server-config":" ,     .",captive:" ,   -.","no-internet":" .   '."},"disconnect-errors":{"remove-proxy":" ,     ."},"download-notification":{title:"  VPN  ",message:"    ,     "},"update-notification":{title:" ",message:"   {{tr_version}}"}},sa=Object.freeze(Object.defineProperty({__proto__:null,default:ta},Symbol.toStringTag,{value:"Module"})),na={"connect-status":{off:"Bn cha c kt ni",on:"Bn c kt ni vi {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":"Kt ni khng thnh cng, vui lng tt cc tin ch m rng khc.","not-controllable":"Kt ni khng thnh cng, proxy trnh duyt khng th kim sot c.","no-location":"Li kt ni, Thiu v tr kt ni.","server-config":"Li kt ni, Khng th tm np cu hnh my ch.",captive:"Kt ni khng thnh cng, Khng th thit lp kt ni proxy.","no-internet":"Li kt ni, Khng c kt ni mng."},"disconnect-errors":{"remove-proxy":"Li ngt kt ni, xa quy tc proxy khng thnh cng."},"download-notification":{title:"Hy dng th My khch VPN my tnh  bn ca chng ti",message:"Bo v ton b kt ni internet ca bn, khng ch trnh duyt"},"update-notification":{title:" cp nht tin ch m rng",message:"Cho mng bn n {{tr_version}}"}},ia=Object.freeze(Object.defineProperty({__proto__:null,default:na},Symbol.toStringTag,{value:"Module"})),ra={"connect-status":{off:"",on:" {{tr_location}}"},"connect-errors":{"controlled-by-other-extensions":"","not-controllable":"","no-location":"","server-config":"",captive:"","no-internet":""},"disconnect-errors":{"remove-proxy":""},"download-notification":{title:"VPN",message:""},"update-notification":{title:"",message:" {{tr_version}}"}},aa=Object.freeze(Object.defineProperty({__proto__:null,default:ra},Symbol.toStringTag,{value:"Module"})),oa={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,e){console&&console[n]&&console[n].apply(console,e)}};class Pt{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||oa,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,s,i){return i&&!this.debug?null:(typeof e[0]=="string"&&(e[0]=`${s}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new Pt(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Pt(this.logger,e)}}var me=new Pt;class Ut{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(s=>{this.observers[s]||(this.observers[s]=new Map);const i=this.observers[s].get(t)||0;this.observers[s].set(t,i+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),i=1;i<t;i++)s[i-1]=arguments[i];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(a=>{let[o,u]=a;for(let h=0;h<u;h++)o(...s)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(a=>{let[o,u]=a;for(let h=0;h<u;h++)o.apply(o,[e,...s])})}}function He(){let n,e;const t=new Promise((s,i)=>{n=s,e=i});return t.resolve=n,t.reject=e,t}function Os(n){return n==null?"":""+n}function ca(n,e,t){n.forEach(s=>{e[s]&&(t[s]=e[s])})}const la=/###/g;function Ye(n,e,t){function s(o){return o&&o.indexOf("###")>-1?o.replace(la,"."):o}function i(){return!n||typeof n=="string"}const r=typeof e!="string"?e:e.split(".");let a=0;for(;a<r.length-1;){if(i())return{};const o=s(r[a]);!n[o]&&t&&(n[o]=new t),Object.prototype.hasOwnProperty.call(n,o)?n=n[o]:n={},++a}return i()?{}:{obj:n,k:s(r[a])}}function Es(n,e,t){const{obj:s,k:i}=Ye(n,e,Object);if(s!==void 0||e.length===1){s[i]=t;return}let r=e[e.length-1],a=e.slice(0,e.length-1),o=Ye(n,a,Object);for(;o.obj===void 0&&a.length;)r=`${a[a.length-1]}.${r}`,a=a.slice(0,a.length-1),o=Ye(n,a,Object),o&&o.obj&&typeof o.obj[`${o.k}.${r}`]<"u"&&(o.obj=void 0);o.obj[`${o.k}.${r}`]=t}function ua(n,e,t,s){const{obj:i,k:r}=Ye(n,e,Object);i[r]=i[r]||[],i[r].push(t)}function Lt(n,e){const{obj:t,k:s}=Ye(n,e);if(t)return t[s]}function da(n,e,t){const s=Lt(n,t);return s!==void 0?s:Lt(e,t)}function an(n,e,t){for(const s in e)s!=="__proto__"&&s!=="constructor"&&(s in n?typeof n[s]=="string"||n[s]instanceof String||typeof e[s]=="string"||e[s]instanceof String?t&&(n[s]=e[s]):an(n[s],e[s],t):n[s]=e[s]);return n}function je(n){return n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var ha={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function fa(n){return typeof n=="string"?n.replace(/[&<>"'\/]/g,e=>ha[e]):n}class pa{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const s=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,s),this.regExpQueue.push(e),s}}const ga=[" ",",","?","!",";"],ma=new pa(20);function va(n,e,t){e=e||"",t=t||"";const s=ga.filter(a=>e.indexOf(a)<0&&t.indexOf(a)<0);if(s.length===0)return!0;const i=ma.getRegExp(`(${s.map(a=>a==="?"?"\\?":a).join("|")})`);let r=!i.test(n);if(!r){const a=n.indexOf(t);a>0&&!i.test(n.substring(0,a))&&(r=!0)}return r}function is(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!n)return;if(n[e])return n[e];const s=e.split(t);let i=n;for(let r=0;r<s.length;){if(!i||typeof i!="object")return;let a,o="";for(let u=r;u<s.length;++u)if(u!==r&&(o+=t),o+=s[u],a=i[o],a!==void 0){if(["string","number","boolean"].indexOf(typeof a)>-1&&u<s.length-1)continue;r+=u-r+1;break}i=a}return i}function Ot(n){return n&&n.indexOf("_")>0?n.replace("_","-"):n}class Is extends Ut{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,s){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const r=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,a=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;e.indexOf(".")>-1?o=e.split("."):(o=[e,t],s&&(Array.isArray(s)?o.push(...s):typeof s=="string"&&r?o.push(...s.split(r)):o.push(s)));const u=Lt(this.data,o);return!u&&!t&&!s&&e.indexOf(".")>-1&&(e=o[0],t=o[1],s=o.slice(2).join(".")),u||!a||typeof s!="string"?u:is(this.data&&this.data[e]&&this.data[e][t],s,r)}addResource(e,t,s,i){let r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const a=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator;let o=[e,t];s&&(o=o.concat(a?s.split(a):s)),e.indexOf(".")>-1&&(o=e.split("."),i=t,t=o[1]),this.addNamespaces(t),Es(this.data,o,i),r.silent||this.emit("added",e,t,s,i)}addResources(e,t,s){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const r in s)(typeof s[r]=="string"||Array.isArray(s[r]))&&this.addResource(e,t,r,s[r],{silent:!0});i.silent||this.emit("added",e,t,s)}addResourceBundle(e,t,s,i,r){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},o=[e,t];e.indexOf(".")>-1&&(o=e.split("."),i=s,s=t,t=o[1]),this.addNamespaces(t);let u=Lt(this.data,o)||{};a.skipCopy||(s=JSON.parse(JSON.stringify(s))),i?an(u,s,r):u={...u,...s},Es(this.data,o,u),a.silent||this.emit("added",e,t,s)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(e,t)}:this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(i=>t[i]&&Object.keys(t[i]).length>0)}toJSON(){return this.data}}var on={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,e,t,s,i){return n.forEach(r=>{this.processors[r]&&(e=this.processors[r].process(e,t,s,i))}),e}};const Rs={};class Et extends Ut{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),ca(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=me.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const s=this.resolve(e,t);return s&&s.res!==void 0}extractFromKey(e,t){let s=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;s===void 0&&(s=":");const i=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let r=t.ns||this.options.defaultNS||[];const a=s&&e.indexOf(s)>-1,o=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!va(e,s,i);if(a&&!o){const u=e.match(this.interpolator.nestingRegexp);if(u&&u.length>0)return{key:e,namespaces:r};const h=e.split(s);(s!==i||s===i&&this.options.ns.indexOf(h[0])>-1)&&(r=h.shift()),e=h.join(i)}return typeof r=="string"&&(r=[r]),{key:e,namespaces:r}}translate(e,t,s){if(typeof t!="object"&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),typeof t=="object"&&(t={...t}),t||(t={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const i=t.returnDetails!==void 0?t.returnDetails:this.options.returnDetails,r=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator,{key:a,namespaces:o}=this.extractFromKey(e[e.length-1],t),u=o[o.length-1],h=t.lng||this.language,g=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(h&&h.toLowerCase()==="cimode"){if(g){const S=t.nsSeparator||this.options.nsSeparator;return i?{res:`${u}${S}${a}`,usedKey:a,exactUsedKey:a,usedLng:h,usedNS:u,usedParams:this.getUsedParamsDetails(t)}:`${u}${S}${a}`}return i?{res:a,usedKey:a,exactUsedKey:a,usedLng:h,usedNS:u,usedParams:this.getUsedParamsDetails(t)}:a}const w=this.resolve(e,t);let d=w&&w.res;const p=w&&w.usedKey||a,c=w&&w.exactUsedKey||a,l=Object.prototype.toString.apply(d),f=["[object Number]","[object Function]","[object RegExp]"],m=t.joinArrays!==void 0?t.joinArrays:this.options.joinArrays,y=!this.i18nFormat||this.i18nFormat.handleAsObject;if(y&&d&&(typeof d!="string"&&typeof d!="boolean"&&typeof d!="number")&&f.indexOf(l)<0&&!(typeof m=="string"&&Array.isArray(d))){if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const S=this.options.returnedObjectHandler?this.options.returnedObjectHandler(p,d,{...t,ns:o}):`key '${a} (${this.language})' returned an object instead of string.`;return i?(w.res=S,w.usedParams=this.getUsedParamsDetails(t),w):S}if(r){const S=Array.isArray(d),M=S?[]:{},_=S?c:p;for(const k in d)if(Object.prototype.hasOwnProperty.call(d,k)){const N=`${_}${r}${k}`;M[k]=this.translate(N,{...t,joinArrays:!1,ns:o}),M[k]===N&&(M[k]=d[k])}d=M}}else if(y&&typeof m=="string"&&Array.isArray(d))d=d.join(m),d&&(d=this.extendTranslation(d,e,t,s));else{let S=!1,M=!1;const _=t.count!==void 0&&typeof t.count!="string",k=Et.hasDefaultValue(t),N=_?this.pluralResolver.getSuffix(h,t.count,t):"",D=t.ordinal&&_?this.pluralResolver.getSuffix(h,t.count,{ordinal:!1}):"",K=_&&!t.ordinal&&t.count===0&&this.pluralResolver.shouldUseIntlApi(),Y=K&&t[`defaultValue${this.options.pluralSeparator}zero`]||t[`defaultValue${N}`]||t[`defaultValue${D}`]||t.defaultValue;!this.isValidLookup(d)&&k&&(S=!0,d=Y),this.isValidLookup(d)||(M=!0,d=a);const O=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&M?void 0:d,J=k&&Y!==d&&this.options.updateMissing;if(M||S||J){if(this.logger.log(J?"updateKey":"missingKey",h,u,a,J?Y:d),r){const B=this.resolve(a,{...t,keySeparator:!1});B&&B.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let W=[];const ee=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if(this.options.saveMissingTo==="fallback"&&ee&&ee[0])for(let B=0;B<ee.length;B++)W.push(ee[B]);else this.options.saveMissingTo==="all"?W=this.languageUtils.toResolveHierarchy(t.lng||this.language):W.push(t.lng||this.language);const ae=(B,ne,we)=>{const Be=k&&we!==d?we:O;this.options.missingKeyHandler?this.options.missingKeyHandler(B,u,ne,Be,J,t):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(B,u,ne,Be,J,t),this.emit("missingKey",B,u,ne,d)};this.options.saveMissing&&(this.options.saveMissingPlurals&&_?W.forEach(B=>{const ne=this.pluralResolver.getSuffixes(B,t);K&&t[`defaultValue${this.options.pluralSeparator}zero`]&&ne.indexOf(`${this.options.pluralSeparator}zero`)<0&&ne.push(`${this.options.pluralSeparator}zero`),ne.forEach(we=>{ae([B],a+we,t[`defaultValue${we}`]||Y)})}):ae(W,a,Y))}d=this.extendTranslation(d,e,t,w,s),M&&d===a&&this.options.appendNamespaceToMissingKey&&(d=`${u}:${a}`),(M||S)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?d=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${u}:${a}`:a,S?d:void 0):d=this.options.parseMissingKeyHandler(d))}return i?(w.res=d,w.usedParams=this.getUsedParamsDetails(t),w):d}extendTranslation(e,t,s,i,r){var a=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...s},s.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!s.skipInterpolation){s.interpolation&&this.interpolator.init({...s,interpolation:{...this.options.interpolation,...s.interpolation}});const h=typeof e=="string"&&(s&&s.interpolation&&s.interpolation.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let g;if(h){const d=e.match(this.interpolator.nestingRegexp);g=d&&d.length}let w=s.replace&&typeof s.replace!="string"?s.replace:s;if(this.options.interpolation.defaultVariables&&(w={...this.options.interpolation.defaultVariables,...w}),e=this.interpolator.interpolate(e,w,s.lng||this.language,s),h){const d=e.match(this.interpolator.nestingRegexp),p=d&&d.length;g<p&&(s.nest=!1)}!s.lng&&this.options.compatibilityAPI!=="v1"&&i&&i.res&&(s.lng=i.usedLng),s.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var d=arguments.length,p=new Array(d),c=0;c<d;c++)p[c]=arguments[c];return r&&r[0]===p[0]&&!s.context?(a.logger.warn(`It seems you are nesting recursively key: ${p[0]} in key: ${t[0]}`),null):a.translate(...p,t)},s)),s.interpolation&&this.interpolator.reset()}const o=s.postProcess||this.options.postProcess,u=typeof o=="string"?[o]:o;return e!=null&&u&&u.length&&s.applyPostProcessor!==!1&&(e=on.handle(u,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(s)},...s}:s,this)),e}resolve(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s,i,r,a,o;return typeof e=="string"&&(e=[e]),e.forEach(u=>{if(this.isValidLookup(s))return;const h=this.extractFromKey(u,t),g=h.key;i=g;let w=h.namespaces;this.options.fallbackNS&&(w=w.concat(this.options.fallbackNS));const d=t.count!==void 0&&typeof t.count!="string",p=d&&!t.ordinal&&t.count===0&&this.pluralResolver.shouldUseIntlApi(),c=t.context!==void 0&&(typeof t.context=="string"||typeof t.context=="number")&&t.context!=="",l=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);w.forEach(f=>{this.isValidLookup(s)||(o=f,!Rs[`${l[0]}-${f}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(o)&&(Rs[`${l[0]}-${f}`]=!0,this.logger.warn(`key "${i}" for languages "${l.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),l.forEach(m=>{if(this.isValidLookup(s))return;a=m;const y=[g];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(y,g,m,f,t);else{let S;d&&(S=this.pluralResolver.getSuffix(m,t.count,t));const M=`${this.options.pluralSeparator}zero`,_=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(d&&(y.push(g+S),t.ordinal&&S.indexOf(_)===0&&y.push(g+S.replace(_,this.options.pluralSeparator)),p&&y.push(g+M)),c){const k=`${g}${this.options.contextSeparator}${t.context}`;y.push(k),d&&(y.push(k+S),t.ordinal&&S.indexOf(_)===0&&y.push(k+S.replace(_,this.options.pluralSeparator)),p&&y.push(k+M))}}let b;for(;b=y.pop();)this.isValidLookup(s)||(r=b,s=this.getResource(m,f,b,t))}))})}),{res:s,usedKey:i,exactUsedKey:r,usedLng:a,usedNS:o}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,s){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,s,i):this.resourceStore.getResource(e,t,s,i)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],s=e.replace&&typeof e.replace!="string";let i=s?e.replace:e;if(s&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!s){i={...i};for(const r of t)delete i[r]}return i}static hasDefaultValue(e){const t="defaultValue";for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&t===s.substring(0,t.length)&&e[s]!==void 0)return!0;return!1}}function Qt(n){return n.charAt(0).toUpperCase()+n.slice(1)}class Ns{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=me.create("languageUtils")}getScriptPartFromCode(e){if(e=Ot(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=Ot(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(typeof e=="string"&&e.indexOf("-")>-1){const t=["hans","hant","latn","cyrl","cans","mong","arab"];let s=e.split("-");return this.options.lowerCaseLng?s=s.map(i=>i.toLowerCase()):s.length===2?(s[0]=s[0].toLowerCase(),s[1]=s[1].toUpperCase(),t.indexOf(s[1].toLowerCase())>-1&&(s[1]=Qt(s[1].toLowerCase()))):s.length===3&&(s[0]=s[0].toLowerCase(),s[1].length===2&&(s[1]=s[1].toUpperCase()),s[0]!=="sgn"&&s[2].length===2&&(s[2]=s[2].toUpperCase()),t.indexOf(s[1].toLowerCase())>-1&&(s[1]=Qt(s[1].toLowerCase())),t.indexOf(s[2].toLowerCase())>-1&&(s[2]=Qt(s[2].toLowerCase()))),s.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(s=>{if(t)return;const i=this.formatLanguageCode(s);(!this.options.supportedLngs||this.isSupportedCode(i))&&(t=i)}),!t&&this.options.supportedLngs&&e.forEach(s=>{if(t)return;const i=this.getLanguagePartFromCode(s);if(this.isSupportedCode(i))return t=i;t=this.options.supportedLngs.find(r=>{if(r===i)return r;if(!(r.indexOf("-")<0&&i.indexOf("-")<0)&&(r.indexOf("-")>0&&i.indexOf("-")<0&&r.substring(0,r.indexOf("-"))===i||r.indexOf(i)===0&&i.length>1))return r})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),typeof e=="string"&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let s=e[t];return s||(s=e[this.getScriptPartFromCode(t)]),s||(s=e[this.formatLanguageCode(t)]),s||(s=e[this.getLanguagePartFromCode(t)]),s||(s=e.default),s||[]}toResolveHierarchy(e,t){const s=this.getFallbackCodes(t||this.options.fallbackLng||[],e),i=[],r=a=>{a&&(this.isSupportedCode(a)?i.push(a):this.logger.warn(`rejecting language code not found in supportedLngs: ${a}`))};return typeof e=="string"&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&r(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&r(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&r(this.getLanguagePartFromCode(e))):typeof e=="string"&&r(this.formatLanguageCode(e)),s.forEach(a=>{i.indexOf(a)<0&&r(this.formatLanguageCode(a))}),i}}let ba=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],ya={1:function(n){return+(n>1)},2:function(n){return+(n!=1)},3:function(n){return 0},4:function(n){return n%10==1&&n%100!=11?0:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2},5:function(n){return n==0?0:n==1?1:n==2?2:n%100>=3&&n%100<=10?3:n%100>=11?4:5},6:function(n){return n==1?0:n>=2&&n<=4?1:2},7:function(n){return n==1?0:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2},8:function(n){return n==1?0:n==2?1:n!=8&&n!=11?2:3},9:function(n){return+(n>=2)},10:function(n){return n==1?0:n==2?1:n<7?2:n<11?3:4},11:function(n){return n==1||n==11?0:n==2||n==12?1:n>2&&n<20?2:3},12:function(n){return+(n%10!=1||n%100==11)},13:function(n){return+(n!==0)},14:function(n){return n==1?0:n==2?1:n==3?2:3},15:function(n){return n%10==1&&n%100!=11?0:n%10>=2&&(n%100<10||n%100>=20)?1:2},16:function(n){return n%10==1&&n%100!=11?0:n!==0?1:2},17:function(n){return n==1||n%10==1&&n%100!=11?0:1},18:function(n){return n==0?0:n==1?1:2},19:function(n){return n==1?0:n==0||n%100>1&&n%100<11?1:n%100>10&&n%100<20?2:3},20:function(n){return n==1?0:n==0||n%100>0&&n%100<20?1:2},21:function(n){return n%100==1?1:n%100==2?2:n%100==3||n%100==4?3:0},22:function(n){return n==1?0:n==2?1:(n<0||n>10)&&n%10==0?2:3}};const wa=["v1","v2","v3"],xa=["v4"],js={zero:0,one:1,two:2,few:3,many:4,other:5};function Sa(){const n={};return ba.forEach(e=>{e.lngs.forEach(t=>{n[t]={numbers:e.nr,plurals:ya[e.fc]}})}),n}class _a{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=me.create("pluralResolver"),(!this.options.compatibilityJSON||xa.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=Sa()}addRule(e,t){this.rules[e]=t}getRule(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(Ot(e==="dev"?"en":e),{type:t.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=this.getRule(e,t);return this.shouldUseIntlApi()?s&&s.resolvedOptions().pluralCategories.length>1:s&&s.numbers.length>1}getPluralFormsOfKey(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,s).map(i=>`${t}${i}`)}getSuffixes(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=this.getRule(e,t);return s?this.shouldUseIntlApi()?s.resolvedOptions().pluralCategories.sort((i,r)=>js[i]-js[r]).map(i=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${i}`):s.numbers.map(i=>this.getSuffix(e,i,t)):[]}getSuffix(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=this.getRule(e,s);return i?this.shouldUseIntlApi()?`${this.options.prepend}${s.ordinal?`ordinal${this.options.prepend}`:""}${i.select(t)}`:this.getSuffixRetroCompatible(i,t):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,t){const s=e.noAbs?e.plurals(t):e.plurals(Math.abs(t));let i=e.numbers[s];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(i===2?i="plural":i===1&&(i=""));const r=()=>this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString();return this.options.compatibilityJSON==="v1"?i===1?"":typeof i=="number"?`_plural_${i.toString()}`:r():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?r():this.options.prepend&&s.toString()?this.options.prepend+s.toString():s.toString()}shouldUseIntlApi(){return!wa.includes(this.options.compatibilityJSON)}}function Ds(n,e,t){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,r=da(n,e,t);return!r&&i&&typeof t=="string"&&(r=is(n,t,s),r===void 0&&(r=is(e,t,s))),r}class ka{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=me.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(t=>t),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:s,useRawValueToEscape:i,prefix:r,prefixEscaped:a,suffix:o,suffixEscaped:u,formatSeparator:h,unescapeSuffix:g,unescapePrefix:w,nestingPrefix:d,nestingPrefixEscaped:p,nestingSuffix:c,nestingSuffixEscaped:l,nestingOptionsSeparator:f,maxReplaces:m,alwaysFormat:y}=e.interpolation;this.escape=t!==void 0?t:fa,this.escapeValue=s!==void 0?s:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=r?je(r):a||"{{",this.suffix=o?je(o):u||"}}",this.formatSeparator=h||",",this.unescapePrefix=g?"":w||"-",this.unescapeSuffix=this.unescapePrefix?"":g||"",this.nestingPrefix=d?je(d):p||je("$t("),this.nestingSuffix=c?je(c):l||je(")"),this.nestingOptionsSeparator=f||",",this.maxReplaces=m||1e3,this.alwaysFormat=y!==void 0?y:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,s)=>t&&t.source===s?(t.lastIndex=0,t):new RegExp(s,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,s,i){let r,a,o;const u=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function h(c){return c.replace(/\$/g,"$$$$")}const g=c=>{if(c.indexOf(this.formatSeparator)<0){const y=Ds(t,u,c,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(y,void 0,s,{...i,...t,interpolationkey:c}):y}const l=c.split(this.formatSeparator),f=l.shift().trim(),m=l.join(this.formatSeparator).trim();return this.format(Ds(t,u,f,this.options.keySeparator,this.options.ignoreJSONStructure),m,s,{...i,...t,interpolationkey:f})};this.resetRegExp();const w=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler,d=i&&i.interpolation&&i.interpolation.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:c=>h(c)},{regex:this.regexp,safeValue:c=>this.escapeValue?h(this.escape(c)):h(c)}].forEach(c=>{for(o=0;r=c.regex.exec(e);){const l=r[1].trim();if(a=g(l),a===void 0)if(typeof w=="function"){const m=w(e,r,i);a=typeof m=="string"?m:""}else if(i&&Object.prototype.hasOwnProperty.call(i,l))a="";else if(d){a=r[0];continue}else this.logger.warn(`missed to pass in variable ${l} for interpolating ${e}`),a="";else typeof a!="string"&&!this.useRawValueToEscape&&(a=Os(a));const f=c.safeValue(a);if(e=e.replace(r[0],f),d?(c.regex.lastIndex+=a.length,c.regex.lastIndex-=r[0].length):c.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),e}nest(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i,r,a;function o(u,h){const g=this.nestingOptionsSeparator;if(u.indexOf(g)<0)return u;const w=u.split(new RegExp(`${g}[ ]*{`));let d=`{${w[1]}`;u=w[0],d=this.interpolate(d,a);const p=d.match(/'/g),c=d.match(/"/g);(p&&p.length%2===0&&!c||c.length%2!==0)&&(d=d.replace(/'/g,'"'));try{a=JSON.parse(d),h&&(a={...h,...a})}catch(l){return this.logger.warn(`failed parsing options string in nesting for key ${u}`,l),`${u}${g}${d}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,u}for(;i=this.nestingRegexp.exec(e);){let u=[];a={...s},a=a.replace&&typeof a.replace!="string"?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;let h=!1;if(i[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(i[1])){const g=i[1].split(this.formatSeparator).map(w=>w.trim());i[1]=g.shift(),u=g,h=!0}if(r=t(o.call(this,i[1].trim(),a),a),r&&i[0]===e&&typeof r!="string")return r;typeof r!="string"&&(r=Os(r)),r||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),r=""),h&&(r=u.reduce((g,w)=>this.format(g,w,s.lng,{...s,interpolationkey:i[1].trim()}),r.trim())),e=e.replace(i[0],r),this.regexp.lastIndex=0}return e}}function Aa(n){let e=n.toLowerCase().trim();const t={};if(n.indexOf("(")>-1){const s=n.split("(");e=s[0].toLowerCase().trim();const i=s[1].substring(0,s[1].length-1);e==="currency"&&i.indexOf(":")<0?t.currency||(t.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?t.range||(t.range=i.trim()):i.split(";").forEach(a=>{if(a){const[o,...u]=a.split(":"),h=u.join(":").trim().replace(/^'+|'+$/g,""),g=o.trim();t[g]||(t[g]=h),h==="false"&&(t[g]=!1),h==="true"&&(t[g]=!0),isNaN(h)||(t[g]=parseInt(h,10))}})}return{formatName:e,formatOptions:t}}function De(n){const e={};return function(s,i,r){const a=i+JSON.stringify(r);let o=e[a];return o||(o=n(Ot(i),r),e[a]=o),o(s)}}class Ca{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=me.create("formatter"),this.options=e,this.formats={number:De((t,s)=>{const i=new Intl.NumberFormat(t,{...s});return r=>i.format(r)}),currency:De((t,s)=>{const i=new Intl.NumberFormat(t,{...s,style:"currency"});return r=>i.format(r)}),datetime:De((t,s)=>{const i=new Intl.DateTimeFormat(t,{...s});return r=>i.format(r)}),relativetime:De((t,s)=>{const i=new Intl.RelativeTimeFormat(t,{...s});return r=>i.format(r,s.range||"day")}),list:De((t,s)=>{const i=new Intl.ListFormat(t,{...s});return r=>i.format(r)})},this.init(e)}init(e){const s=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=s.formatSeparator?s.formatSeparator:s.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=De(t)}format(e,t,s){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return t.split(this.formatSeparator).reduce((o,u)=>{const{formatName:h,formatOptions:g}=Aa(u);if(this.formats[h]){let w=o;try{const d=i&&i.formatParams&&i.formatParams[i.interpolationkey]||{},p=d.locale||d.lng||i.locale||i.lng||s;w=this.formats[h](o,p,{...g,...i,...d})}catch(d){this.logger.warn(d)}return w}else this.logger.warn(`there was no format function for ${h}`);return o},e)}}function Ta(n,e){n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)}class Pa extends Ut{constructor(e,t,s){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=s,this.languageUtils=s.languageUtils,this.options=i,this.logger=me.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(s,i.backend,i)}queueLoad(e,t,s,i){const r={},a={},o={},u={};return e.forEach(h=>{let g=!0;t.forEach(w=>{const d=`${h}|${w}`;!s.reload&&this.store.hasResourceBundle(h,w)?this.state[d]=2:this.state[d]<0||(this.state[d]===1?a[d]===void 0&&(a[d]=!0):(this.state[d]=1,g=!1,a[d]===void 0&&(a[d]=!0),r[d]===void 0&&(r[d]=!0),u[w]===void 0&&(u[w]=!0)))}),g||(o[h]=!0)}),(Object.keys(r).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(r),pending:Object.keys(a),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(u)}}loaded(e,t,s){const i=e.split("|"),r=i[0],a=i[1];t&&this.emit("failedLoading",r,a,t),s&&this.store.addResourceBundle(r,a,s,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2;const o={};this.queue.forEach(u=>{ua(u.loaded,[r],a),Ta(u,e),t&&u.errors.push(t),u.pendingCount===0&&!u.done&&(Object.keys(u.loaded).forEach(h=>{o[h]||(o[h]={});const g=u.loaded[h];g.length&&g.forEach(w=>{o[h][w]===void 0&&(o[h][w]=!0)})}),u.done=!0,u.errors.length?u.callback(u.errors):u.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(u=>!u.done)}read(e,t,s){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,a=arguments.length>5?arguments[5]:void 0;if(!e.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:s,tried:i,wait:r,callback:a});return}this.readingCalls++;const o=(h,g)=>{if(this.readingCalls--,this.waitingReads.length>0){const w=this.waitingReads.shift();this.read(w.lng,w.ns,w.fcName,w.tried,w.wait,w.callback)}if(h&&g&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,s,i+1,r*2,a)},r);return}a(h,g)},u=this.backend[s].bind(this.backend);if(u.length===2){try{const h=u(e,t);h&&typeof h.then=="function"?h.then(g=>o(null,g)).catch(o):o(null,h)}catch(h){o(h)}return}return u(e,t,o)}prepareLoading(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();typeof e=="string"&&(e=this.languageUtils.toResolveHierarchy(e)),typeof t=="string"&&(t=[t]);const r=this.queueLoad(e,t,s,i);if(!r.toLoad.length)return r.pending.length||i(),null;r.toLoad.forEach(a=>{this.loadOne(a)})}load(e,t,s){this.prepareLoading(e,t,{},s)}reload(e,t,s){this.prepareLoading(e,t,{reload:!0},s)}loadOne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const s=e.split("|"),i=s[0],r=s[1];this.read(i,r,"read",void 0,void 0,(a,o)=>{a&&this.logger.warn(`${t}loading namespace ${r} for language ${i} failed`,a),!a&&o&&this.logger.log(`${t}loaded namespace ${r} for language ${i}`,o),this.loaded(e,a,o)})}saveMissing(e,t,s,i,r){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${s}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(s==null||s==="")){if(this.backend&&this.backend.create){const u={...a,isUpdate:r},h=this.backend.create.bind(this.backend);if(h.length<6)try{let g;h.length===5?g=h(e,t,s,i,u):g=h(e,t,s,i),g&&typeof g.then=="function"?g.then(w=>o(null,w)).catch(o):o(null,g)}catch(g){o(g)}else h(e,t,s,i,o,u)}!e||!e[0]||this.store.addResource(e[0],t,s,i)}}}function $s(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){let t={};if(typeof e[1]=="object"&&(t=e[1]),typeof e[1]=="string"&&(t.defaultValue=e[1]),typeof e[2]=="string"&&(t.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const s=e[3]||e[2];Object.keys(s).forEach(i=>{t[i]=s[i]})}return t},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function Ms(n){return typeof n.ns=="string"&&(n.ns=[n.ns]),typeof n.fallbackLng=="string"&&(n.fallbackLng=[n.fallbackLng]),typeof n.fallbackNS=="string"&&(n.fallbackNS=[n.fallbackNS]),n.supportedLngs&&n.supportedLngs.indexOf("cimode")<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),n}function wt(){}function La(n){Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(t=>{typeof n[t]=="function"&&(n[t]=n[t].bind(n))})}class ht extends Ut{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(super(),this.options=Ms(e),this.services={},this.logger=me,this.modules={external:[]},La(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(){var e=this;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof t=="function"&&(s=t,t={}),!t.defaultNS&&t.defaultNS!==!1&&t.ns&&(typeof t.ns=="string"?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const i=$s();this.options={...i,...this.options,...Ms(t)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...i.interpolation,...this.options.interpolation}),t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator);function r(g){return g?typeof g=="function"?new g:g:null}if(!this.options.isClone){this.modules.logger?me.init(r(this.modules.logger),this.options):me.init(null,this.options);let g;this.modules.formatter?g=this.modules.formatter:typeof Intl<"u"&&(g=Ca);const w=new Ns(this.options);this.store=new Is(this.options.resources,this.options);const d=this.services;d.logger=me,d.resourceStore=this.store,d.languageUtils=w,d.pluralResolver=new _a(w,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),g&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(d.formatter=r(g),d.formatter.init(d,this.options),this.options.interpolation.format=d.formatter.format.bind(d.formatter)),d.interpolator=new ka(this.options),d.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},d.backendConnector=new Pa(r(this.modules.backend),d.resourceStore,d,this.options),d.backendConnector.on("*",function(p){for(var c=arguments.length,l=new Array(c>1?c-1:0),f=1;f<c;f++)l[f-1]=arguments[f];e.emit(p,...l)}),this.modules.languageDetector&&(d.languageDetector=r(this.modules.languageDetector),d.languageDetector.init&&d.languageDetector.init(d,this.options.detection,this.options)),this.modules.i18nFormat&&(d.i18nFormat=r(this.modules.i18nFormat),d.i18nFormat.init&&d.i18nFormat.init(this)),this.translator=new Et(this.services,this.options),this.translator.on("*",function(p){for(var c=arguments.length,l=new Array(c>1?c-1:0),f=1;f<c;f++)l[f-1]=arguments[f];e.emit(p,...l)}),this.modules.external.forEach(p=>{p.init&&p.init(this)})}if(this.format=this.options.interpolation.format,s||(s=wt),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const g=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);g.length>0&&g[0]!=="dev"&&(this.options.lng=g[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(g=>{this[g]=function(){return e.store[g](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(g=>{this[g]=function(){return e.store[g](...arguments),e}});const u=He(),h=()=>{const g=(w,d)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),u.resolve(d),s(w,d)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return g(null,this.t.bind(this));this.changeLanguage(this.options.lng,g)};return this.options.resources||!this.options.initImmediate?h():setTimeout(h,0),u}loadResources(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:wt;const i=typeof e=="string"?e:this.language;if(typeof e=="function"&&(s=e),!this.options.resources||this.options.partialBundledLanguages){if(i&&i.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return s();const r=[],a=o=>{if(!o||o==="cimode")return;this.services.languageUtils.toResolveHierarchy(o).forEach(h=>{h!=="cimode"&&r.indexOf(h)<0&&r.push(h)})};i?a(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(u=>a(u)),this.options.preload&&this.options.preload.forEach(o=>a(o)),this.services.backendConnector.load(r,this.options.ns,o=>{!o&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),s(o)})}else s(null)}reloadResources(e,t,s){const i=He();return e||(e=this.languages),t||(t=this.options.ns),s||(s=wt),this.services.backendConnector.reload(e,t,r=>{i.resolve(),s(r)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&on.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let t=0;t<this.languages.length;t++){const s=this.languages[t];if(!(["cimode","dev"].indexOf(s)>-1)&&this.store.hasLanguageSomeTranslations(s)){this.resolvedLanguage=s;break}}}changeLanguage(e,t){var s=this;this.isLanguageChangingTo=e;const i=He();this.emit("languageChanging",e);const r=u=>{this.language=u,this.languages=this.services.languageUtils.toResolveHierarchy(u),this.resolvedLanguage=void 0,this.setResolvedLanguage(u)},a=(u,h)=>{h?(r(h),this.translator.changeLanguage(h),this.isLanguageChangingTo=void 0,this.emit("languageChanged",h),this.logger.log("languageChanged",h)):this.isLanguageChangingTo=void 0,i.resolve(function(){return s.t(...arguments)}),t&&t(u,function(){return s.t(...arguments)})},o=u=>{!e&&!u&&this.services.languageDetector&&(u=[]);const h=typeof u=="string"?u:this.services.languageUtils.getBestMatchFromCodes(u);h&&(this.language||r(h),this.translator.language||this.translator.changeLanguage(h),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(h)),this.loadResources(h,g=>{a(g,h)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(e),i}getFixedT(e,t,s){var i=this;const r=function(a,o){let u;if(typeof o!="object"){for(var h=arguments.length,g=new Array(h>2?h-2:0),w=2;w<h;w++)g[w-2]=arguments[w];u=i.options.overloadTranslationOptionHandler([a,o].concat(g))}else u={...o};u.lng=u.lng||r.lng,u.lngs=u.lngs||r.lngs,u.ns=u.ns||r.ns,u.keyPrefix=u.keyPrefix||s||r.keyPrefix;const d=i.options.keySeparator||".";let p;return u.keyPrefix&&Array.isArray(a)?p=a.map(c=>`${u.keyPrefix}${d}${c}`):p=u.keyPrefix?`${u.keyPrefix}${d}${a}`:a,i.t(p,u)};return typeof e=="string"?r.lng=e:r.lngs=e,r.ns=t,r.keyPrefix=s,r}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const s=t.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,r=this.languages[this.languages.length-1];if(s.toLowerCase()==="cimode")return!0;const a=(o,u)=>{const h=this.services.backendConnector.state[`${o}|${u}`];return h===-1||h===2};if(t.precheck){const o=t.precheck(this,a);if(o!==void 0)return o}return!!(this.hasResourceBundle(s,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(s,e)&&(!i||a(r,e)))}loadNamespaces(e,t){const s=He();return this.options.ns?(typeof e=="string"&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{s.resolve(),t&&t(i)}),s):(t&&t(),Promise.resolve())}loadLanguages(e,t){const s=He();typeof e=="string"&&(e=[e]);const i=this.options.preload||[],r=e.filter(a=>i.indexOf(a)<0&&this.services.languageUtils.isSupportedCode(a));return r.length?(this.options.preload=i.concat(r),this.loadResources(a=>{s.resolve(),t&&t(a)}),s):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],s=this.services&&this.services.languageUtils||new Ns($s());return t.indexOf(s.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return new ht(e,t)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:wt;const s=e.forkResourceStore;s&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},r=new ht(i);return(e.debug!==void 0||e.prefix!==void 0)&&(r.logger=r.logger.clone(e)),["store","services","language"].forEach(o=>{r[o]=this[o]}),r.services={...this.services},r.services.utils={hasLoadedNamespace:r.hasLoadedNamespace.bind(r)},s&&(r.store=new Is(this.store.data,i),r.services.resourceStore=r.store),r.translator=new Et(r.services,i),r.translator.on("*",function(o){for(var u=arguments.length,h=new Array(u>1?u-1:0),g=1;g<u;g++)h[g-1]=arguments[g];r.emit(o,...h)}),r.init(i,t),r.translator.options=i,r.translator.backendConnector.services.utils={hasLoadedNamespace:r.hasLoadedNamespace.bind(r)},r}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const se=ht.createInstance();se.createInstance=ht.createInstance;se.createInstance;se.dir;se.init;se.loadResources;se.reloadResources;se.use;se.changeLanguage;se.getFixedT;se.t;se.exists;se.setDefaultNamespace;se.hasLoadedNamespace;se.loadNamespaces;se.loadLanguages;class It extends ce{constructor(t){super();Z(this,"translator",se);this.i18nStorage=t}get activeLocale(){return this.i18nStorage.state.locale??Yt}get languageList(){return Promise.resolve(this).catch(()=>{}),[...br.entries()].map(([t,s])=>({code:t,label:s}))}async boot(){if(await this.i18nStorage.sync(),!this.i18nStorage.state.locale){const s=It.getUILanguage();await this.setLocale(s)}const t=It.buildResources();await this.translator.init({resources:t,lng:this.activeLocale,fallbackLng:Yt,interpolation:{escapeValue:!1}}),this.bootResolve(),await this.bootPromise}t(t,s={}){return this.translator.t(t,s)}async setLocale(t){await this.i18nStorage.setItems({locale:t})}static getUILanguage(){const t=H.i18n.getUILanguage(),s=t.replaceAll("-","_");if(Ls(s))return s;const i=t.substring(0,2);return Ls(i)?i:Yt}static buildResources(){return Object.entries(Object.assign({"./locales/ar/base.json":Sr,"./locales/bg/base.json":kr,"./locales/bn/base.json":Cr,"./locales/da/base.json":Pr,"./locales/de/base.json":Or,"./locales/en/base.json":Ir,"./locales/es/base.json":Nr,"./locales/fi/base.json":Dr,"./locales/fr/base.json":Mr,"./locales/he/base.json":Ur,"./locales/hi/base.json":Fr,"./locales/it/base.json":Br,"./locales/nl/base.json":Wr,"./locales/no/base.json":Hr,"./locales/pl/base.json":Gr,"./locales/ru/base.json":Qr,"./locales/ta/base.json":ea,"./locales/uk/base.json":sa,"./locales/vi/base.json":ia,"./locales/zh_CN/base.json":aa})).reduce((i,[r,a])=>{const o=r.split("/").at(-2),u=r.split("/").at(-1).split(".").at(0);return i[o]={...i[o],[u]:a.default},i},{})}}const Oa=new re("i18n",wr),cn=new It(Oa);class Ea{constructor(){Z(this,"eventMap",new Map)}subscribe(e){Object.entries(e).forEach(([s,i])=>{this.eventMap.has(s)||this.eventMap.set(s,[]);const r=[...this.eventMap.get(s)??[],i];this.eventMap.set(s,r)})}dispatch(e){Object.entries(e).forEach(([s,i])=>{(this.eventMap.get(s)??[]).forEach(a=>{var o;(o=a(i))==null||o.catch(()=>{})})})}}const zt=new Ea,Ia=["disconnected","connecting","connected","disconnecting"],Ra="disconnected",Na=v.object({status:v.enum(Ia).describe(U.persist),ipAddress:v.string().optional().describe(U.session),connectionCount:v.number().describe(U.persist),useAutoConnect:v.boolean().describe(U.persist)}).default({status:Ra,connectionCount:0,useAutoConnect:!1}),ja=new fe(Na);class Da extends ce{constructor(e){super(),this.connectionStorage=e}get currentIp(){return this.connectionStorage.state.ipAddress}get status(){return this.connectionStorage.state.status}get isConnected(){return this.connectionStorage.state.status==="connected"}get connectionCount(){return this.connectionStorage.state.connectionCount}get useAutoConnect(){return this.connectionStorage.state.useAutoConnect}async boot(){await this.connectionStorage.sync(),this.bootResolve(),await this.bootPromise}async setIpAddress(e){await this.connectionStorage.setItems({ipAddress:e})}async removeIpAddress(){await this.connectionStorage.removeItems("ipAddress")}async setConnectionStatus(e){await this.connectionStorage.setItems({status:e})}async incrementConnectionCount(){const e=this.connectionStorage.state.connectionCount+1;await this.connectionStorage.setItems({connectionCount:e})}async setAutoConnect(e){await this.connectionStorage.setItems({useAutoConnect:e})}}const $a=new re("connection",ja),Ma=new Da($a),rs=["free","premium"],Va=["available","unavailable"],Ua=v.object({accessToken:v.string(),refreshToken:v.string()}),Vs=v.object({type:v.enum(rs),url:v.string().url(),status:v.enum(Va),nextCheck:v.number()}),za=v.object({tokens:Ua.optional().describe(U.persist),[rs[0]]:Vs.describe(U.persist),[rs[1]]:Vs.describe(U.persist)}).default({free:{type:"free",url:"",status:"unavailable",nextCheck:0},premium:{type:"premium",url:"",status:"unavailable",nextCheck:0}}),Fa=new fe(za),Rt={authRefreshToken:"/auth/refresh-token/",authLogin:"/auth/login/",authLogout:"/auth/logout/",authForgotPassword:"/auth/forgot-password/",apiLaunch:"/api/launch/",apiLocationList:"/api/location/list/",apiServer:"/api/server/",apiServerList:"/api/server/list/",apiAvailable:"/api/available/",apiAccountAuthToken:"/api/account/account-auth-token/"},Za="https://antpeak.com",Ba="https://zorvian.com",Us="https://s3-oregon-1.s3-us-west-2.amazonaws.com/api.json",Ka=1*60*60*1e3;function Wa(){const e=(us.UAParser().browser.name??"").toLowerCase();return e?e.includes("firefox")?"firefox":e.includes("opera")?"opera":e.includes("edge")?"edge":"chrome":"chrome"}const zs=us.UAParser(),qa=Wa();class ln extends ce{constructor(t,s,i,r,a,o){super();Z(this,"domainType");Z(this,"domainUrl");this.apiStorage=i,this.globalStateService=r,this.fetchService=a,this.analyticsService=o,this.domainType=t,this.domainUrl=s}get apiDomainUrl(){return this.domainUrl}get hasTokens(){return!!this.apiStorage.state.tokens}get deviceInfo(){const t=H.runtime.getManifest(),s=zs.browser.name??"Chrome",i=zs.browser.version??"0.0.0";return{udid:this.globalStateService.udid.value,appVersion:t.version,platform:qa,platformVersion:navigator.userAgent,timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone,deviceName:`${s} ${i}`}}get isDomainAvailable(){const{status:t,nextCheck:s}=this.apiStorage.state[this.domainType];return t==="available"&&s>Date.now()}async boot(){await this.apiStorage.sync(),this.isDomainAvailable||await this.updateDomainData(),this.bootResolve(),await this.bootPromise}async setTokens(t){await this.apiStorage.setItems({tokens:t})}async removeTokens(){await this.apiStorage.removeItems("tokens")}async updateDomainData(){if(await this.apiGetDomainStatus(this.domainUrl)){await this.apiStorage.setItems({[this.domainType]:{type:this.domainType,url:this.domainUrl,status:"available",nextCheck:Date.now()+Ka}});return}const s=await this.apiGetReserveDomains();if(s.success){const i=s.data.free;if(await this.apiGetDomainStatus(i,!0)){await this.apiStorage.setItems({[this.domainType]:{type:this.domainType,url:i,status:"available",nextCheck:0}});return}}await this.apiStorage.setItems({[this.domainType]:{type:this.domainType,url:"",status:"unavailable",nextCheck:0}})}async fetch(t){const s={...t,url:this.apiStorage.state[this.domainType].url+Rt[t.url]};return await this.request(s)}async apiGetReserveDomains(){const t=await this.fetchService.request({method:"GET",url:Us});return t.success||this.analyticsService.sendEvent({type:"google-analytics",name:"api_banned_2",data:{api_domain:Us,status_code:Oe.getStatusCodeMessage(t)}}),t}async apiGetDomainStatus(t,s=!1){const i=await this.fetchService.request({method:"GET",url:`${t}${Rt.apiAvailable}`});return i.success||this.analyticsService.sendEvent({type:"google-analytics",name:s?"api_banned_3":"api_banned_1",data:{api_domain:t,status_code:Oe.getStatusCodeMessage(i)}}),i.success?i.data.message==="OK":!1}}class Ha extends ln{constructor(e,t,s,i,r,a,o){super(e,t,s,i,r,o),this.apiStorage=s,this.globalStateService=i,this.fetchService=r,this.eventService=a,this.analyticsService=o}async request(e){var o,u;const t=((o=this.apiStorage.state.tokens)==null?void 0:o.accessToken)??"",s=await this.fetchService.request({...e,headers:{Authorization:`Bearer ${t}`,...e.headers}});if(s.success||s.errors.every(h=>h.status!==401))return s;const r=((u=this.apiStorage.state.tokens)==null?void 0:u.refreshToken)??"",a=await this.fetchService.request({headers:{Authorization:`Bearer ${r}`},method:"POST",url:this.apiStorage.state[this.domainType].url+Rt.apiLaunch,body:this.deviceInfo});return a.success?(await this.setTokens({accessToken:a.data.accessToken,refreshToken:a.data.accessToken}),this.request(e)):(this.eventService.dispatch({"free-refresh-token-failed":void 0}),s)}}class Ja extends ln{constructor(e,t,s,i,r,a,o){super(e,t,s,i,r,o),this.apiStorage=s,this.globalStateService=i,this.fetchService=r,this.eventService=a,this.analyticsService=o}async request(e){var o,u;const t=((o=this.apiStorage.state.tokens)==null?void 0:o.accessToken)??"",s=await this.fetchService.request({...e,headers:{Authorization:`Bearer ${t}`,...e.headers}});if(s.success||s.errors.every(h=>h.status!==401))return s;const r=((u=this.apiStorage.state.tokens)==null?void 0:u.refreshToken)??"",a=await this.fetchService.request({headers:{Authorization:`Bearer ${r}`},method:"POST",url:this.apiStorage.state[this.domainType].url+Rt.authRefreshToken,body:this.deviceInfo});return a.success?(await this.setTokens({accessToken:a.data.accessToken,refreshToken:a.data.refreshToken}),this.request(e)):(this.eventService.dispatch({"premium-refresh-token-failed":void 0}),s)}}const un=new re("api",Fa),dn=new Ha("free",Za,un,Mt,Vt,zt,$t),hn=new Ja("premium",Ba,un,Mt,Vt,zt,$t);var fn=(n=>(n[n.regular=0]="regular",n[n.lifeTime=1]="lifeTime",n))(fn||{}),ds=(n=>(n[n.prepaid=0]="prepaid",n[n.trial=1]="trial",n))(ds||{}),Nt=(n=>(n[n.disabled=0]="disabled",n[n.active=1]="active",n))(Nt||{}),pn=(n=>(n[n.noSlots=0]="noSlots",n[n.hasSlots=1]="hasSlots",n))(pn||{}),ft=(n=>(n[n.disabled=0]="disabled",n[n.active=1]="active",n))(ft||{}),gn=(n=>(n[n.needConfirm=0]="needConfirm",n[n.confirmed=1]="confirmed",n))(gn||{});const Ga=v.object({name:v.string(),infinity:v.nativeEnum(fn),trial:v.nativeEnum(ds),status:v.nativeEnum(Nt),slot:v.nativeEnum(pn),startTime:v.number(),endTime:v.number(),countdown:v.number(),today:v.number()});v.object({udid:v.string(),status:v.nativeEnum(ft),registeredAt:v.number(),lastLoggedAt:v.number()});const Ya=v.object({id:v.number(),username:v.string(),email:v.string().email(),status:v.nativeEnum(ft),confirm:v.nativeEnum(gn),registeredAt:v.number(),registeredCountryCode:v.string(),lastLoggedAt:v.number(),lastCountryCode:v.string(),confirmedEmailAt:v.number(),shareUrl:v.string().url()}),Qa=v.object({subscription:Ga.optional().describe(U.persist),user:Ya.optional().describe(U.persist)}).default({}),Xa=new fe(Qa);class eo extends ce{constructor(e){super(),this.userStorage=e}get user(){return this.userStorage.state.user??null}get subscription(){return this.userStorage.state.subscription??null}get canUsePremiumDomain(){var s,i;const e=((s=this.userStorage.state.user)==null?void 0:s.status)===ft.active,t=((i=this.userStorage.state.subscription)==null?void 0:i.status)===Nt.active;return e&&t}get userType(){var i,r,a;const e=((i=this.userStorage.state.user)==null?void 0:i.status)===ft.active,t=((r=this.userStorage.state.subscription)==null?void 0:r.status)===Nt.active,s=((a=this.userStorage.state.subscription)==null?void 0:a.trial)===ds.trial;return e&&t&&s?"trial":e&&t?"premium":"free"}async boot(){await this.userStorage.sync(),this.bootResolve(),await this.bootPromise}async setUser(e){await this.userStorage.setItems({user:e})}async removeUser(){await this.userStorage.removeItems("user")}async setSubscription(e){await this.userStorage.setItems({subscription:e})}async removeSubscription(){await this.userStorage.removeItems("subscription")}}const to=new re("user",Xa),mn=new eo(to),so="nl";var Ft=(n=>(n[n.public=0]="public",n[n.private=1]="private",n))(Ft||{}),hs=(n=>(n[n.free=0]="free",n[n.premium=1]="premium",n))(hs||{}),no=(n=>(n.free="free",n.premium="premium",n.custom="custom",n))(no||{});const io=v.object({id:v.string(),name:v.string(),code:v.string(),phrases:v.string().array()}),ro=v.object({id:v.string(),name:v.string(),phrases:v.string().array(),region:v.string(),via:v.string(),target:v.string(),countryCode:v.string(),type:v.nativeEnum(Ft),proxyType:v.nativeEnum(hs)}),ao=v.object({region:v.string(),name:v.string(),description:v.string(),countryCode:v.string(),latitude:v.string(),longitude:v.string(),networkLoad:v.string(),priority:v.number(),type:v.nativeEnum(Ft),proxy_type:v.nativeEnum(hs)}),oo=v.object({id:v.string(),type:v.literal(2)}),co=v.object({id:v.string(),type:v.literal(1),items:oo.array()}),lo=v.object({countries:io.array(),locations:ro.array(),items:co.array()}),uo=v.object({type:v.nativeEnum(Ft),region:v.string(),regionName:v.string(),countryName:v.string(),countryCode:v.string()}),ho=v.object({activeId:v.string().optional().describe(U.persist),favoriteIds:v.string().array().describe(U.persist),locationsData:lo.optional().describe(U.session),lastActiveLocationData:uo.optional().describe(U.persist)}).default({favoriteIds:[]}),fo=new fe(ho);function po(n){return ao.safeParse(n).success}class go extends ce{constructor(e){super(),this.locationStorage=e}get activeLocation(){return!this.locationStorage.state.activeId||!this.locationStorage.state.locationsData?null:this.locationStorage.state.locationsData.locations.find(t=>t.id===this.locationStorage.state.activeId)??null}get activeLocationId(){return this.locationStorage.state.activeId??""}get favoriteLocations(){return this.locationStorage.state.favoriteIds}get locationsData(){return this.locationStorage.state.locationsData??null}get lastActiveLocation(){return this.locationStorage.state.lastActiveLocationData??null}async boot(){await this.locationStorage.sync(),this.bootResolve(),await this.bootPromise}async setLocationsData(e){await this.locationStorage.setItems({locationsData:e})}async removeLocationsData(){await this.locationStorage.removeItems("locationsData")}async setActiveLocation(e){var s,i,r;let t;if(typeof e=="string")t=e;else if(po(e)){const a=(s=this.locationStorage.state.locationsData)==null?void 0:s.locations.find(o=>{const u=o.region===e.region,h=o.proxyType===e.proxy_type;return u&&h});t=a==null?void 0:a.id}else{const a=(i=this.locationStorage.state.locationsData)==null?void 0:i.locations.find(o=>o.region===so);t=a==null?void 0:a.id}if(t?await this.locationStorage.setItems({activeId:t}):await this.locationStorage.removeItems("activeId"),this.activeLocation){const a=(r=this.locationStorage.state.locationsData)==null?void 0:r.countries.find(u=>u.code===this.activeLocation.countryCode),o={type:this.activeLocation.type,region:this.activeLocation.region,regionName:this.activeLocation.name,countryName:(a==null?void 0:a.name)??"N/A",countryCode:this.activeLocation.countryCode};await this.locationStorage.setItems({lastActiveLocationData:o})}else await this.locationStorage.removeItems("lastActiveLocationData")}async removeActiveLocation(){await this.locationStorage.removeItems("activeId")}async setFavoriteLocations(e){const t=[...new Set([...this.locationStorage.state.favoriteIds,...e])];await this.locationStorage.setItems({favoriteIds:t})}async removeFavoriteLocations(e){const t=this.locationStorage.state.favoriteIds.filter(s=>!e.includes(s));await this.locationStorage.setItems({favoriteIds:t})}}const mo=new re("location",fo),vn=new go(mo),vo=v.object({url:v.string(),favicon:v.string().optional()}),bo=v.object({sites:vo.array().describe(U.persist)}).default({sites:[]}),yo=new fe(bo);var bn={exports:{}};(function(n){(function(e){const t="(0?\\d+|0x[a-f0-9]+)",s={fourOctet:new RegExp(`^${t}\\.${t}\\.${t}\\.${t}$`,"i"),threeOctet:new RegExp(`^${t}\\.${t}\\.${t}$`,"i"),twoOctet:new RegExp(`^${t}\\.${t}$`,"i"),longValue:new RegExp(`^${t}$`,"i")},i=new RegExp("^0[0-7]+$","i"),r=new RegExp("^0x[a-f0-9]+$","i"),a="%[0-9a-z]{1,}",o="(?:[0-9a-f]+::?)+",u={zoneIndex:new RegExp(a,"i"),native:new RegExp(`^(::)?(${o})?([0-9a-f]+)?(::)?(${a})?$`,"i"),deprecatedTransitional:new RegExp(`^(?:::)(${t}\\.${t}\\.${t}\\.${t}(${a})?)$`,"i"),transitional:new RegExp(`^((?:${o})|(?:::)(?:${o})?)${t}\\.${t}\\.${t}\\.${t}(${a})?$`,"i")};function h(c,l){if(c.indexOf("::")!==c.lastIndexOf("::"))return null;let f=0,m=-1,y=(c.match(u.zoneIndex)||[])[0],b,S;for(y&&(y=y.substring(1),c=c.replace(/%.+$/,""));(m=c.indexOf(":",m+1))>=0;)f++;if(c.substr(0,2)==="::"&&f--,c.substr(-2,2)==="::"&&f--,f>l)return null;for(S=l-f,b=":";S--;)b+="0:";return c=c.replace("::",b),c[0]===":"&&(c=c.slice(1)),c[c.length-1]===":"&&(c=c.slice(0,-1)),l=function(){const M=c.split(":"),_=[];for(let k=0;k<M.length;k++)_.push(parseInt(M[k],16));return _}(),{parts:l,zoneId:y}}function g(c,l,f,m){if(c.length!==l.length)throw new Error("ipaddr: cannot match CIDR for objects with different lengths");let y=0,b;for(;m>0;){if(b=f-m,b<0&&(b=0),c[y]>>b!==l[y]>>b)return!1;m-=f,y+=1}return!0}function w(c){if(r.test(c))return parseInt(c,16);if(c[0]==="0"&&!isNaN(parseInt(c[1],10))){if(i.test(c))return parseInt(c,8);throw new Error(`ipaddr: cannot parse ${c} as octal`)}return parseInt(c,10)}function d(c,l){for(;c.length<l;)c=`0${c}`;return c}const p={};p.IPv4=function(){function c(l){if(l.length!==4)throw new Error("ipaddr: ipv4 octet count should be 4");let f,m;for(f=0;f<l.length;f++)if(m=l[f],!(0<=m&&m<=255))throw new Error("ipaddr: ipv4 octet should fit in 8 bits");this.octets=l}return c.prototype.SpecialRanges={unspecified:[[new c([0,0,0,0]),8]],broadcast:[[new c([255,255,255,255]),32]],multicast:[[new c([224,0,0,0]),4]],linkLocal:[[new c([169,254,0,0]),16]],loopback:[[new c([127,0,0,0]),8]],carrierGradeNat:[[new c([100,64,0,0]),10]],private:[[new c([10,0,0,0]),8],[new c([172,16,0,0]),12],[new c([192,168,0,0]),16]],reserved:[[new c([192,0,0,0]),24],[new c([192,0,2,0]),24],[new c([192,88,99,0]),24],[new c([198,18,0,0]),15],[new c([198,51,100,0]),24],[new c([203,0,113,0]),24],[new c([240,0,0,0]),4]],as112:[[new c([192,175,48,0]),24],[new c([192,31,196,0]),24]],amt:[[new c([192,52,193,0]),24]]},c.prototype.kind=function(){return"ipv4"},c.prototype.match=function(l,f){let m;if(f===void 0&&(m=l,l=m[0],f=m[1]),l.kind()!=="ipv4")throw new Error("ipaddr: cannot match ipv4 address with non-ipv4 one");return g(this.octets,l.octets,8,f)},c.prototype.prefixLengthFromSubnetMask=function(){let l=0,f=!1;const m={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:0};let y,b,S;for(y=3;y>=0;y-=1)if(b=this.octets[y],b in m){if(S=m[b],f&&S!==0)return null;S!==8&&(f=!0),l+=S}else return null;return 32-l},c.prototype.range=function(){return p.subnetMatch(this,this.SpecialRanges)},c.prototype.toByteArray=function(){return this.octets.slice(0)},c.prototype.toIPv4MappedAddress=function(){return p.IPv6.parse(`::ffff:${this.toString()}`)},c.prototype.toNormalizedString=function(){return this.toString()},c.prototype.toString=function(){return this.octets.join(".")},c}(),p.IPv4.broadcastAddressFromCIDR=function(c){try{const l=this.parseCIDR(c),f=l[0].toByteArray(),m=this.subnetMaskFromPrefixLength(l[1]).toByteArray(),y=[];let b=0;for(;b<4;)y.push(parseInt(f[b],10)|parseInt(m[b],10)^255),b++;return new this(y)}catch{throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},p.IPv4.isIPv4=function(c){return this.parser(c)!==null},p.IPv4.isValid=function(c){try{return new this(this.parser(c)),!0}catch{return!1}},p.IPv4.isValidCIDR=function(c){try{return this.parseCIDR(c),!0}catch{return!1}},p.IPv4.isValidFourPartDecimal=function(c){return!!(p.IPv4.isValid(c)&&c.match(/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){3}$/))},p.IPv4.networkAddressFromCIDR=function(c){let l,f,m,y,b;try{for(l=this.parseCIDR(c),m=l[0].toByteArray(),b=this.subnetMaskFromPrefixLength(l[1]).toByteArray(),y=[],f=0;f<4;)y.push(parseInt(m[f],10)&parseInt(b[f],10)),f++;return new this(y)}catch{throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},p.IPv4.parse=function(c){const l=this.parser(c);if(l===null)throw new Error("ipaddr: string is not formatted like an IPv4 Address");return new this(l)},p.IPv4.parseCIDR=function(c){let l;if(l=c.match(/^(.+)\/(\d+)$/)){const f=parseInt(l[2]);if(f>=0&&f<=32){const m=[this.parse(l[1]),f];return Object.defineProperty(m,"toString",{value:function(){return this.join("/")}}),m}}throw new Error("ipaddr: string is not formatted like an IPv4 CIDR range")},p.IPv4.parser=function(c){let l,f,m;if(l=c.match(s.fourOctet))return function(){const y=l.slice(1,6),b=[];for(let S=0;S<y.length;S++)f=y[S],b.push(w(f));return b}();if(l=c.match(s.longValue)){if(m=w(l[1]),m>4294967295||m<0)throw new Error("ipaddr: address outside defined range");return function(){const y=[];let b;for(b=0;b<=24;b+=8)y.push(m>>b&255);return y}().reverse()}else return(l=c.match(s.twoOctet))?function(){const y=l.slice(1,4),b=[];if(m=w(y[1]),m>16777215||m<0)throw new Error("ipaddr: address outside defined range");return b.push(w(y[0])),b.push(m>>16&255),b.push(m>>8&255),b.push(m&255),b}():(l=c.match(s.threeOctet))?function(){const y=l.slice(1,5),b=[];if(m=w(y[2]),m>65535||m<0)throw new Error("ipaddr: address outside defined range");return b.push(w(y[0])),b.push(w(y[1])),b.push(m>>8&255),b.push(m&255),b}():null},p.IPv4.subnetMaskFromPrefixLength=function(c){if(c=parseInt(c),c<0||c>32)throw new Error("ipaddr: invalid IPv4 prefix length");const l=[0,0,0,0];let f=0;const m=Math.floor(c/8);for(;f<m;)l[f]=255,f++;return m<4&&(l[m]=Math.pow(2,c%8)-1<<8-c%8),new this(l)},p.IPv6=function(){function c(l,f){let m,y;if(l.length===16)for(this.parts=[],m=0;m<=14;m+=2)this.parts.push(l[m]<<8|l[m+1]);else if(l.length===8)this.parts=l;else throw new Error("ipaddr: ipv6 part count should be 8 or 16");for(m=0;m<this.parts.length;m++)if(y=this.parts[m],!(0<=y&&y<=65535))throw new Error("ipaddr: ipv6 part should fit in 16 bits");f&&(this.zoneId=f)}return c.prototype.SpecialRanges={unspecified:[new c([0,0,0,0,0,0,0,0]),128],linkLocal:[new c([65152,0,0,0,0,0,0,0]),10],multicast:[new c([65280,0,0,0,0,0,0,0]),8],loopback:[new c([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new c([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new c([0,0,0,0,0,65535,0,0]),96],discard:[new c([256,0,0,0,0,0,0,0]),64],rfc6145:[new c([0,0,0,0,65535,0,0,0]),96],rfc6052:[new c([100,65435,0,0,0,0,0,0]),96],"6to4":[new c([8194,0,0,0,0,0,0,0]),16],teredo:[new c([8193,0,0,0,0,0,0,0]),32],benchmarking:[new c([8193,2,0,0,0,0,0,0]),48],amt:[new c([8193,3,0,0,0,0,0,0]),32],as112v6:[[new c([8193,4,274,0,0,0,0,0]),48],[new c([9760,79,32768,0,0,0,0,0]),48]],deprecated:[new c([8193,16,0,0,0,0,0,0]),28],orchid2:[new c([8193,32,0,0,0,0,0,0]),28],droneRemoteIdProtocolEntityTags:[new c([8193,48,0,0,0,0,0,0]),28],reserved:[[new c([8193,0,0,0,0,0,0,0]),23],[new c([8193,3512,0,0,0,0,0,0]),32]]},c.prototype.isIPv4MappedAddress=function(){return this.range()==="ipv4Mapped"},c.prototype.kind=function(){return"ipv6"},c.prototype.match=function(l,f){let m;if(f===void 0&&(m=l,l=m[0],f=m[1]),l.kind()!=="ipv6")throw new Error("ipaddr: cannot match ipv6 address with non-ipv6 one");return g(this.parts,l.parts,16,f)},c.prototype.prefixLengthFromSubnetMask=function(){let l=0,f=!1;const m={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:0};let y,b;for(let S=7;S>=0;S-=1)if(y=this.parts[S],y in m){if(b=m[y],f&&b!==0)return null;b!==16&&(f=!0),l+=b}else return null;return 128-l},c.prototype.range=function(){return p.subnetMatch(this,this.SpecialRanges)},c.prototype.toByteArray=function(){let l;const f=[],m=this.parts;for(let y=0;y<m.length;y++)l=m[y],f.push(l>>8),f.push(l&255);return f},c.prototype.toFixedLengthString=function(){const l=(function(){const m=[];for(let y=0;y<this.parts.length;y++)m.push(d(this.parts[y].toString(16),4));return m}).call(this).join(":");let f="";return this.zoneId&&(f=`%${this.zoneId}`),l+f},c.prototype.toIPv4Address=function(){if(!this.isIPv4MappedAddress())throw new Error("ipaddr: trying to convert a generic ipv6 address to ipv4");const l=this.parts.slice(-2),f=l[0],m=l[1];return new p.IPv4([f>>8,f&255,m>>8,m&255])},c.prototype.toNormalizedString=function(){const l=(function(){const m=[];for(let y=0;y<this.parts.length;y++)m.push(this.parts[y].toString(16));return m}).call(this).join(":");let f="";return this.zoneId&&(f=`%${this.zoneId}`),l+f},c.prototype.toRFC5952String=function(){const l=/((^|:)(0(:|$)){2,})/g,f=this.toNormalizedString();let m=0,y=-1,b;for(;b=l.exec(f);)b[0].length>y&&(m=b.index,y=b[0].length);return y<0?f:`${f.substring(0,m)}::${f.substring(m+y)}`},c.prototype.toString=function(){return this.toRFC5952String()},c}(),p.IPv6.broadcastAddressFromCIDR=function(c){try{const l=this.parseCIDR(c),f=l[0].toByteArray(),m=this.subnetMaskFromPrefixLength(l[1]).toByteArray(),y=[];let b=0;for(;b<16;)y.push(parseInt(f[b],10)|parseInt(m[b],10)^255),b++;return new this(y)}catch(l){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${l})`)}},p.IPv6.isIPv6=function(c){return this.parser(c)!==null},p.IPv6.isValid=function(c){if(typeof c=="string"&&c.indexOf(":")===-1)return!1;try{const l=this.parser(c);return new this(l.parts,l.zoneId),!0}catch{return!1}},p.IPv6.isValidCIDR=function(c){if(typeof c=="string"&&c.indexOf(":")===-1)return!1;try{return this.parseCIDR(c),!0}catch{return!1}},p.IPv6.networkAddressFromCIDR=function(c){let l,f,m,y,b;try{for(l=this.parseCIDR(c),m=l[0].toByteArray(),b=this.subnetMaskFromPrefixLength(l[1]).toByteArray(),y=[],f=0;f<16;)y.push(parseInt(m[f],10)&parseInt(b[f],10)),f++;return new this(y)}catch(S){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${S})`)}},p.IPv6.parse=function(c){const l=this.parser(c);if(l.parts===null)throw new Error("ipaddr: string is not formatted like an IPv6 Address");return new this(l.parts,l.zoneId)},p.IPv6.parseCIDR=function(c){let l,f,m;if((f=c.match(/^(.+)\/(\d+)$/))&&(l=parseInt(f[2]),l>=0&&l<=128))return m=[this.parse(f[1]),l],Object.defineProperty(m,"toString",{value:function(){return this.join("/")}}),m;throw new Error("ipaddr: string is not formatted like an IPv6 CIDR range")},p.IPv6.parser=function(c){let l,f,m,y,b,S;if(m=c.match(u.deprecatedTransitional))return this.parser(`::ffff:${m[1]}`);if(u.native.test(c))return h(c,8);if((m=c.match(u.transitional))&&(S=m[6]||"",l=m[1],m[1].endsWith("::")||(l=l.slice(0,-1)),l=h(l+S,6),l.parts)){for(b=[parseInt(m[2]),parseInt(m[3]),parseInt(m[4]),parseInt(m[5])],f=0;f<b.length;f++)if(y=b[f],!(0<=y&&y<=255))return null;return l.parts.push(b[0]<<8|b[1]),l.parts.push(b[2]<<8|b[3]),{parts:l.parts,zoneId:l.zoneId}}return null},p.IPv6.subnetMaskFromPrefixLength=function(c){if(c=parseInt(c),c<0||c>128)throw new Error("ipaddr: invalid IPv6 prefix length");const l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];let f=0;const m=Math.floor(c/8);for(;f<m;)l[f]=255,f++;return m<16&&(l[m]=Math.pow(2,c%8)-1<<8-c%8),new this(l)},p.fromByteArray=function(c){const l=c.length;if(l===4)return new p.IPv4(c);if(l===16)return new p.IPv6(c);throw new Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address")},p.isValid=function(c){return p.IPv6.isValid(c)||p.IPv4.isValid(c)},p.isValidCIDR=function(c){return p.IPv6.isValidCIDR(c)||p.IPv4.isValidCIDR(c)},p.parse=function(c){if(p.IPv6.isValid(c))return p.IPv6.parse(c);if(p.IPv4.isValid(c))return p.IPv4.parse(c);throw new Error("ipaddr: the address has neither IPv6 nor IPv4 format")},p.parseCIDR=function(c){try{return p.IPv6.parseCIDR(c)}catch{try{return p.IPv4.parseCIDR(c)}catch{throw new Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format")}}},p.process=function(c){const l=this.parse(c);return l.kind()==="ipv6"&&l.isIPv4MappedAddress()?l.toIPv4Address():l},p.subnetMatch=function(c,l,f){let m,y,b,S;f==null&&(f="unicast");for(y in l)if(Object.prototype.hasOwnProperty.call(l,y)){for(b=l[y],b[0]&&!(b[0]instanceof Array)&&(b=[b]),m=0;m<b.length;m++)if(S=b[m],c.kind()===S[0].kind()&&c.match.apply(c,S))return y}return f},n.exports?n.exports=p:e.ipaddr=p})(cs)})(bn);var wo=bn.exports;const Fs=Bs(wo);class fs extends ce{constructor(t){super();Z(this,"NON_ROUTABLE_IP_ADDRESS",["0.0.0.0/8","10.0.0.0/8","14.0.0.0/8","24.0.0.0/8","39.0.0.0/8","127.0.0.0/8","128.0.0.0/16","169.254.0.0/16","172.16.0.0/12","191.255.0.0/16","192.0.0.0/24","192.0.2.0/24","192.88.99.0/24","192.168.0.0/16","198.18.0.0/15","223.255.255.0/24","224.0.0.0/4","240.0.0.0/4"]);Z(this,"DEFAULT_EXCLUSIONS",["::1","localhost","*.local","127.0.0.1"]);this.exclusionsStorage=t}get nonRoutableNets(){const t=s=>{const[i,r]=Fs.parseCIDR(s);return[i.toString(),Fs.IPv4.subnetMaskFromPrefixLength(r).toString()]};return this.NON_ROUTABLE_IP_ADDRESS.map(t)}get exclusionList(){const t=this.exclusionsStorage.state.sites.map(s=>s.url);return[...this.DEFAULT_EXCLUSIONS,...t]}get nonRoutableList(){return[...this.NON_ROUTABLE_IP_ADDRESS]}async boot(){await this.exclusionsStorage.sync(),this.bootResolve(),await this.bootPromise}async set(t,s){const i=fs.parseHostname(t);if(!i||this.exclusionsStorage.state.sites.some(o=>o.url===i))return;const a=[...this.exclusionsStorage.state.sites,{url:i,...s?{favicon:s}:{}}];await this.exclusionsStorage.setItems({sites:a})}async remove(t){const s=this.exclusionsStorage.state.sites.filter(i=>i.url!==t);await this.exclusionsStorage.setItems({sites:s})}static parseHostname(t){const s=t.match(/^(?:https?:)?(?:\/\/)?([^/?]+)/i);return s&&s[1]}}const xo=new re("exclusions",yo),So=new fs(xo),_o=["udp","tcp","ipsec","https","http","sws","wg"],ko=v.object({addresses:v.array(v.string()),protocol:v.enum(_o),port:v.number()}),Ao=v.object({username:v.string(),password:v.string()}),Co=v.object({credentials:Ao.nullable().describe(U.persist),serverConfigList:v.array(ko).describe(U.persist)}).default({credentials:null,serverConfigList:[]}),To=new fe(Co),_e=class _e extends ce{constructor(t){super();Z(this,"setting",H.proxy.settings);Z(this,"details",{levelOfControl:"not_controllable",value:{mode:"system"}});this.proxyStorage=t,this.setting.onChange.addListener(s=>{this.details=s,_e.settingChangeResolver()})}get canControlProxy(){const{levelOfControl:t}=this.details;return t==="not_controllable"||t==="controlled_by_other_extensions"?{status:!1,cause:t}:{status:!0}}get isApplied(){const{levelOfControl:t}=this.details;return t==="controlled_by_this_extension"}get authCredentials(){return this.proxyStorage.state.credentials}get serverConfigList(){return this.proxyStorage.state.serverConfigList}async boot(){await this.proxyStorage.sync(),this.details=await this.setting.get({}),this.bootResolve(),await this.bootPromise}async enable(t){if(this.isApplied)return this.canControlProxy;if(!this.canControlProxy.status)return this.canControlProxy;const s=_e.createPacScriptProxyConfig(t);await this.proxyStorage.setItems({credentials:t.credentials,serverConfigList:t.serverConfig});const i=new Promise(r=>{_e.settingChangeResolver=r});return await this.setting.set({value:s,scope:"regular"}),await i,this.canControlProxy}async disable(){if(!this.isApplied)return!0;await this.proxyStorage.setItems({credentials:null,serverConfigList:[]});const t=new Promise(s=>{_e.settingChangeResolver=s});return await this.setting.clear({}),await t,!this.isApplied}static createPacScriptProxyConfig(t){const s=/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/,i=t.serverConfig.flatMap(a=>{const o=a.protocol.toUpperCase();return a.addresses.map(u=>`${o} ${u}:${a.port}`)}).join("; ");return{mode:"pac_script",pacScript:{data:`
      function FindProxyForURL(url, host) {
        const areHostnamesEqual = (hostnameA, hostnameB) => {
          const wwwRegex = /^www\\./;
          const oldHostnameWithoutWww = hostnameA.replace(wwwRegex, '');
          const newHostnameWithoutWww = hostnameB.replace(wwwRegex, '');
          return oldHostnameWithoutWww === newHostnameWithoutWww;
        };

        if (isPlainHostName(host)) {
          return 'DIRECT';
        }

        const ipv4Regex = new RegExp(${s});
        const nonRoutableNets = ${JSON.stringify(t.nonRoutableNets)};
        if (ipv4Regex.test(host) && nonRoutableNets.some(([pattern, mask]) => isInNet(host, pattern, mask))) {
          return 'DIRECT';
        }

        const exclusions = ${JSON.stringify(t.exclusionList)};
        if (exclusions.some(el => (areHostnamesEqual(host, el) || shExpMatch(host, el)))) {
          return 'DIRECT';
        }

        return '${i}';
      }`}}}async enableFixed(t){if(this.isApplied)return this.canControlProxy;if(!this.canControlProxy.status)return this.canControlProxy;const s=_e.createFixedServersProxyConfig(t);await this.proxyStorage.setItems({credentials:t.credentials,serverConfigList:t.serverConfig});const i=new Promise(r=>{_e.settingChangeResolver=r});return await this.setting.set({value:s,scope:"regular"}),await i,this.canControlProxy}static createFixedServersProxyConfig(t){const s=t.serverConfig[0];return{mode:"fixed_servers",rules:{singleProxy:{host:s.addresses[0],port:s.port,scheme:s.protocol},bypassList:t.exclusionList}}}};Z(_e,"settingChangeResolver",()=>{});let as=_e;const Po=new re("proxy",To),Lo=new as(Po),Ve=class Ve{async setImage(e){const t=e==="connected"?Ve.CONNECTED_ICONS:Ve.DISCONNECTED_ICONS;await H.action.setIcon({path:t}),await Promise.resolve(this)}async setTooltip(e){const s=H.runtime.getManifest().name;await H.action.setTitle({title:`${s}
${e}`}),await Promise.resolve(this)}};Z(Ve,"CONNECTED_ICONS",{16:"/icons/16.png",32:"/icons/32.png",48:"/icons/48.png",64:"/icons/64.png",128:"/icons/128.png"}),Z(Ve,"DISCONNECTED_ICONS",{16:"/icons/16-grey.png",32:"/icons/32-grey.png",48:"/icons/48-grey.png",64:"/icons/64-grey.png",128:"/icons/128-grey.png"});let os=Ve;const Oo=new os,Eo=["https://captive.apple.com/"],Io="https://cloudflare.com/cdn-cgi/trace",Zs="n/a";class Ro{constructor(e,t,s,i,r,a,o,u,h,g,w,d,p,c,l){this.messageService=e,this.analyticsService=t,this.eventService=s,this.fetchService=i,this.connectionService=r,this.apiFreeService=a,this.apiPremiumService=o,this.userService=u,this.locationService=h,this.exclusionsService=g,this.proxyService=w,this.iconService=d,this.i18nService=p,this.appService=c,this.notificationService=l,this.eventService.subscribe({"free-refresh-token-failed":this.disconnect.bind(this),"premium-refresh-token-failed":this.disconnect.bind(this)}),this.eventService.subscribe({"internet-connection-changed":this.changeInternetConnectionListener.bind(this)})}get needAuthTrigger(){return this.appService.majorBrowserVersion===0?!1:this.appService.majorBrowserVersion<122}async init(){await this.updateIcon(),this.locationService.locationsData||await this.updateLocationData(),this.connectionService.currentIp||await this.updateIpAddress()}async getLocationsData(){return await Promise.resolve(),{success:!0,data:{data:this.locationService.locationsData,activeId:this.locationService.activeLocationId,favoriteIds:this.locationService.favoriteLocations}}}async getLastActiveLocation(){return await Promise.resolve(),this.locationService.lastActiveLocation?{success:!0,data:this.locationService.lastActiveLocation}:{success:!1,errors:[{code:0,status:0,name:"",message:this.i18nService.t("base:connect-errors.no-location")}]}}async updateLocations(){const e=this.userService.canUsePremiumDomain?await this.apiPremiumService.fetch({method:"POST",url:"apiLocationList"}):await this.apiFreeService.fetch({method:"POST",url:"apiLocationList"});return e.success?(await this.locationService.setLocationsData(e.data),{success:!0,data:{data:this.locationService.locationsData,activeId:this.locationService.activeLocationId,favoriteIds:this.locationService.favoriteLocations}}):e}async setActiveLocation(e){return await this.locationService.setActiveLocation(e),{success:!0,data:{success:!0}}}async setFavoriteLocations(e){return e.action==="add"?await this.locationService.setFavoriteLocations(e.list):await this.locationService.removeFavoriteLocations(e.list),{success:!0,data:{success:!0}}}async connectPac(){if(await this.changeConnectionStatus("connecting"),!this.locationService.activeLocation)return await this.changeConnectionStatus("disconnected"),{success:!1,errors:[{code:0,status:0,name:"",message:this.i18nService.t("base:connect-errors.no-location")}]};this.analyticsService.sendEvent({type:"google-analytics",name:"connection_tried",data:{country:this.locationService.activeLocation.countryCode,city:this.locationService.activeLocation.name,server_type:this.locationService.activeLocation.type,server_address:"no_addresses",server_region:this.locationService.activeLocation.id}});const e={protocol:"https",region:this.locationService.activeLocation.region,type:this.locationService.activeLocation.type},t=this.userService.canUsePremiumDomain?await this.apiPremiumService.fetch({method:"POST",url:"apiServerList",body:e}):await this.apiFreeService.fetch({method:"POST",url:"apiServerList",body:e});if(!t.success)return await this.changeConnectionStatus("disconnected"),this.analyticsService.sendEvent({type:"google-analytics",name:"connection_failed_backend",data:{country:this.locationService.activeLocation.countryCode,city:this.locationService.activeLocation.name,server_type:this.locationService.activeLocation.type,server_address:"no_addresses",server_region:this.locationService.activeLocation.id,status_code:Oe.getStatusCodeMessage(t)}}),{success:!1,errors:[{code:0,status:0,name:"",message:this.i18nService.t("base:connect-errors.server-config")}]};const s=t.data.map(h=>{const g=this.appService.isBlockAds?h.rpz_port:h.port;return{addresses:h.addresses,protocol:h.protocol,port:g}}),i=t.data[0],r=await this.proxyService.enable({serverConfig:s,credentials:{username:i.username,password:i.password},nonRoutableNets:this.exclusionsService.nonRoutableNets,exclusionList:this.exclusionsService.exclusionList});if(!r.status)return await this.changeConnectionStatus("disconnected"),{success:!1,errors:[{code:0,status:0,name:"",message:r.cause==="not_controllable"?this.i18nService.t("base:connect-errors.not-controllable"):this.i18nService.t("base:connect-errors.controlled-by-other-extensions")}]};const a=s.flatMap(h=>h.addresses).join(", "),o={country:this.locationService.activeLocation.countryCode,city:this.locationService.activeLocation.name,server_type:this.locationService.activeLocation.type,server_address:a,server_region:this.locationService.activeLocation.id};if(this.needAuthTrigger&&!await this.triggerAuthRequiredListener())return await this.changeConnectionStatus("disconnected"),await this.proxyService.disable(),this.analyticsService.sendEvent({type:"google-analytics",name:"connection_failed_create_tab",data:{...o,status_code:"tab-create"}}),{success:!1,errors:[{code:0,status:0,name:"",message:this.i18nService.t("base:connect-errors.captive")}]};const u=await this.checkInternetConnection();return u.success?(await this.connectionService.incrementConnectionCount(),await this.updateIpAddress(),await this.changeConnectionStatus("connected"),await this.updateIcon(),await this.createDownloadNotification(),this.analyticsService.sendEvent({type:"google-analytics",name:"connection_succeeded",data:o}),{success:!0,data:{success:!0}}):(await this.changeConnectionStatus("disconnected"),await this.proxyService.disable(),this.analyticsService.sendEvent({type:"google-analytics",name:"connection_failed_check",data:{...o,status_code:Oe.getStatusCodeMessage(u)}}),{success:!1,errors:[{code:0,status:0,name:"",message:this.i18nService.t("base:connect-errors.captive")}]})}async connect(){if(await this.changeConnectionStatus("connecting"),!this.locationService.activeLocation)return await this.changeConnectionStatus("disconnected"),{success:!1,errors:[{code:0,status:0,name:"",message:this.i18nService.t("base:connect-errors.no-location")}]};this.analyticsService.sendEvent({type:"google-analytics",name:"connection_tried",data:{country:this.locationService.activeLocation.countryCode,city:this.locationService.activeLocation.name,server_type:this.locationService.activeLocation.type,server_address:"no_addresses",server_region:this.locationService.activeLocation.id}});const e={protocol:"https",region:this.locationService.activeLocation.region,type:this.locationService.activeLocation.type},t=this.userService.canUsePremiumDomain?await this.apiPremiumService.fetch({method:"POST",url:"apiServerList",body:e}):await this.apiFreeService.fetch({method:"POST",url:"apiServerList",body:e});if(!t.success)return await this.changeConnectionStatus("disconnected"),this.analyticsService.sendEvent({type:"google-analytics",name:"connection_failed_backend",data:{country:this.locationService.activeLocation.countryCode,city:this.locationService.activeLocation.name,server_type:this.locationService.activeLocation.type,server_address:"no_addresses",server_region:this.locationService.activeLocation.id,status_code:Oe.getStatusCodeMessage(t)}}),{success:!1,errors:[{code:0,status:0,name:"",message:this.i18nService.t("base:connect-errors.server-config")}]};const s=t.data.map(o=>{const u=this.appService.isBlockAds?o.rpz_port:o.port;return{addresses:o.addresses,protocol:o.protocol,port:u}});let i=!1;for(let o=0;o<s.length;o+=1){const u=t.data[o],h=await this.proxyService.enableFixed({serverConfig:[u],credentials:{username:u.username,password:u.password},nonRoutableNets:this.exclusionsService.nonRoutableNets,exclusionList:this.exclusionsService.exclusionList});if(!h.status)return await this.changeConnectionStatus("disconnected"),{success:!1,errors:[{code:0,status:0,name:"",message:h.cause==="not_controllable"?this.i18nService.t("base:connect-errors.not-controllable"):this.i18nService.t("base:connect-errors.controlled-by-other-extensions")}]};const g=u.addresses[0];if(this.needAuthTrigger&&!await this.triggerAuthRequiredListener())continue;const w={country:this.locationService.activeLocation.countryCode,city:this.locationService.activeLocation.name,server_type:this.locationService.activeLocation.type,server_address:g,server_region:this.locationService.activeLocation.id},d=await this.checkInternetConnection();if(d.success){i=!0;break}else await this.proxyService.disable(),this.analyticsService.sendEvent({type:"google-analytics",name:"connection_failed_availability_domain_1",data:{...w,status_code:Oe.getStatusCodeMessage(d)}})}const r=s.flatMap(o=>o.addresses).join(", "),a={country:this.locationService.activeLocation.countryCode,city:this.locationService.activeLocation.name,server_type:this.locationService.activeLocation.type,server_address:r,server_region:this.locationService.activeLocation.id};return i?(await this.connectionService.incrementConnectionCount(),await this.updateIpAddress(),await this.changeConnectionStatus("connected"),await this.updateIcon(),await this.createDownloadNotification(),this.analyticsService.sendEvent({type:"google-analytics",name:"connection_succeeded",data:a}),{success:!0,data:{success:!0}}):(await this.changeConnectionStatus("disconnected"),await this.proxyService.disable(),this.analyticsService.sendEvent({type:"google-analytics",name:"connection_failed_check",data:{...a,status_code:"loop_fixed_server"}}),{success:!1,errors:[{code:0,status:0,name:"",message:this.i18nService.t("base:connect-errors.captive")}]})}async disconnect(){return await this.changeConnectionStatus("disconnecting"),await this.proxyService.disable()?(await this.updateIpAddress(),await this.changeConnectionStatus("disconnected"),await this.updateIcon(),{success:!0,data:{success:!0}}):{success:!1,errors:[{code:0,status:0,name:"",message:this.i18nService.t("base:disconnect-errors.remove-proxy")}]}}async getConnectionState(){await Promise.resolve();const e=this.connectionService.currentIp??Zs;return{success:!0,data:{status:this.connectionService.status,ip:e,connectionCount:this.connectionService.connectionCount}}}async getAutoConnectSetting(){return await Promise.resolve(),{success:!0,data:{status:this.connectionService.useAutoConnect}}}async setAutoConnectSetting(e){return await this.connectionService.setAutoConnect(e.status),{success:!0,data:{success:!0}}}async updateApiDomain(){return this.apiFreeService.isDomainAvailable||await this.apiFreeService.updateDomainData(),this.apiPremiumService.isDomainAvailable||await this.apiPremiumService.updateDomainData(),{success:!0,data:{success:!0}}}async triggerAuthRequiredListener(){const e=function(s){return new Promise((i,r)=>{H.tabs.create({url:s,active:!1}).then(a=>{let o;const u=function(g,w){w.status==="complete"&&g===a.id&&(H.tabs.onUpdated.removeListener(u),H.tabs.remove(g).catch(()=>{}),clearTimeout(o),i(a))};o=setTimeout(()=>{H.tabs.onUpdated.removeListener(u),a.id&&H.tabs.remove(a.id).catch(()=>{}),clearTimeout(o),r()},5e3),H.tabs.onUpdated.addListener(u)}).catch(r)})};try{const t=this.userService.canUsePremiumDomain?this.apiPremiumService.apiDomainUrl:this.apiFreeService.apiDomainUrl;return await e(t),!0}catch{return!1}}async updateIpAddress(){const e=await this.fetchService.request({method:"GET",url:Io});if(e.success)try{const t=e.data.trim().split(/\n/).map(i=>i.split("=")),s=Object.fromEntries(t);await this.connectionService.setIpAddress(s.ip)}catch{this.analyticsService.sendEvent({type:"google-analytics",name:"ip_parse_failed"})}else await this.connectionService.removeIpAddress(),this.analyticsService.sendEvent({type:"google-analytics",name:"ip_check_failed"})}async updateIcon(){var e;if(this.connectionService.isConnected){const t=((e=this.locationService.activeLocation)==null?void 0:e.name)??"VeePN",s=this.i18nService.t("base:connect-status.on",{tr_location:t});await this.iconService.setImage("connected"),await this.iconService.setTooltip(s)}else{const t=this.i18nService.t("base:connect-status.off");await this.iconService.setImage("disconnected"),await this.iconService.setTooltip(t)}}async updateLocationData(){const e=this.userService.canUsePremiumDomain?await this.apiPremiumService.fetch({method:"POST",url:"apiLocationList"}):await this.apiFreeService.fetch({method:"POST",url:"apiLocationList"});e.success&&await this.locationService.setLocationsData(e.data)}async changeConnectionStatus(e){e==="disconnected"&&await this.appService.setBlockAds(!1),await this.connectionService.setConnectionStatus(e);const t=this.connectionService.currentIp??Zs;this.messageService.notifyPopup({type:"connection-change",success:!0,data:{status:this.connectionService.status,ip:t,connectionCount:this.connectionService.connectionCount}})}async createDownloadNotification(){this.connectionService.connectionCount<=3||Date.now()<this.appService.downloadNotificationTimestamp||(await this.notificationService.notify({options:{type:"image",title:this.i18nService.t("base:download-notification.title"),imageUrl:H.runtime.getURL("/images/desktop-notification.jpg"),message:this.i18nService.t("base:download-notification.message")},callback:"download-app"}),await this.appService.incrementDownloadNotificationTimestamp(),this.analyticsService.sendEvent({type:"google-analytics",name:"notify_popup_pc_download_shown"}))}async checkInternetConnection(){return await this.fetchService.request({method:"GET",url:Eo[0],timeout:7e3})}async changeInternetConnectionListener(e){e.online?this.locationService.locationsData||await this.updateLocationData():this.connectionService.status==="connected"&&await this.disconnect(),this.messageService.notifyPopup({type:"internet-connection-changed",success:!0,data:{online:e.online}})}}class No{constructor(e,t){this.messageService=e,this.connectionController=t}init(){this.messageService.subscribe({connect:this.connect.bind(this),disconnect:this.disconnect.bind(this),"get-connection-state":this.getConnectionState.bind(this),"get-locations-data":this.getLocationsData.bind(this),"get-last-active-location":this.getLastActiveLocation.bind(this),"update-locations-data":this.updateLocations.bind(this),"set-active-location":this.setActiveLocation.bind(this),"set-favorite-locations":this.setFavoriteLocations.bind(this),"update-api-domain":this.updateApiDomain.bind(this),"get-auto-connect-setting":this.getAutoConnectSetting.bind(this),"set-auto-connect-setting":this.setAutoConnectSetting.bind(this)})}async connect(){return{...await this.connectionController.connect(),type:"connect"}}async disconnect(){return{...await this.connectionController.disconnect(),type:"disconnect"}}async getConnectionState(){return{...await this.connectionController.getConnectionState(),type:"get-connection-state"}}async getLocationsData(){return{...await this.connectionController.getLocationsData(),type:"get-locations-data"}}async getLastActiveLocation(){return{...await this.connectionController.getLastActiveLocation(),type:"get-last-active-location"}}async updateLocations(){return{...await this.connectionController.updateLocations(),type:"update-locations-data"}}async setActiveLocation(e){return{...await this.connectionController.setActiveLocation(e),type:"set-active-location"}}async setFavoriteLocations(e){return{...await this.connectionController.setFavoriteLocations(e),type:"set-favorite-locations"}}async updateApiDomain(){return{...await this.connectionController.updateApiDomain(),type:"update-api-domain"}}async getAutoConnectSetting(){return{...await this.connectionController.getAutoConnectSetting(),type:"get-auto-connect-setting"}}async setAutoConnectSetting(e){return{...await this.connectionController.setAutoConnectSetting(e),type:"set-auto-connect-setting"}}}const jo=new Ro(jt,$t,zt,Vt,Ma,dn,hn,mn,vn,So,Lo,Oo,cn,or,vr),zo=new No(jt,jo);class Do{constructor(e,t,s,i,r,a,o,u,h){this.globalStateService=e,this.apiFreeService=t,this.apiPremiumService=s,this.userService=i,this.locationService=r,this.accessService=a,this.messageService=o,this.eventService=u,this.i18nService=h,this.eventService.subscribe({"premium-refresh-token-failed":this.premiumRefreshTokenFailedListener.bind(this),"free-refresh-token-failed":this.freeRefreshTokenFailedListener.bind(this)})}async init(){this.apiFreeService.hasTokens||await this.launch()}async launch(){if(!this.globalStateService.hasInternetConnection)return{success:!1,errors:[{code:0,status:0,name:"",message:this.i18nService.t("base:connect-errors.no-internet")}]};const e=await this.apiFreeService.fetch({method:"POST",url:"apiLaunch",body:{...this.apiFreeService.deviceInfo}});if(!e.success)return await this.criticalErrorOccured(),e;await this.apiFreeService.setTokens({accessToken:e.data.accessToken,refreshToken:e.data.accessToken});const t=await this.apiFreeService.fetch({method:"POST",url:"apiLocationList"});if(!t.success)return await this.criticalErrorOccured(),t;if(await this.locationService.setLocationsData(t.data),!this.locationService.activeLocation){const s=e.data.user.default.location;await this.locationService.setActiveLocation(s)}return await this.globalStateService.setCriticalError(!1),{success:!0,data:{success:!0}}}async relaunch(){return this.apiFreeService.isDomainAvailable||await this.apiFreeService.updateDomainData(),this.apiPremiumService.isDomainAvailable||await this.apiPremiumService.updateDomainData(),this.launch()}async getCriticalError(){return await Promise.resolve(),{success:!0,data:{state:this.globalStateService.criticalError}}}async login(e){if(!this.globalStateService.hasInternetConnection)return{success:!1,errors:[{code:0,status:0,name:"",message:this.i18nService.t("base:connect-errors.no-internet")}]};const t=await this.apiPremiumService.fetch({method:"POST",url:"authLogin",body:{...this.apiFreeService.deviceInfo,...e}});if(!t.success)return t;await this.apiPremiumService.setTokens({accessToken:t.data.accessToken,refreshToken:t.data.refreshToken});const s=await this.apiPremiumService.fetch({method:"POST",url:"apiLocationList"});if(!s.success)return s;const i=t.data.user.default.location;return await this.locationService.setLocationsData(s.data),await this.locationService.setActiveLocation(i),await this.userService.setSubscription(t.data.user.subscription),await this.userService.setUser(t.data.user),{success:!0,data:{success:!0}}}async logout(){if(!this.globalStateService.hasInternetConnection)return{success:!1,errors:[{code:0,status:0,name:"",message:this.i18nService.t("base:connect-errors.no-internet")}]};const e=await this.apiPremiumService.fetch({method:"POST",url:"authLogout"});if(!e.success)return e;await this.userService.removeSubscription(),await this.userService.removeUser();const t=await this.apiFreeService.fetch({method:"POST",url:"apiLaunch",body:{...this.apiFreeService.deviceInfo}});if(!t.success)return await this.criticalErrorOccured(),t;await this.apiFreeService.setTokens({accessToken:t.data.accessToken,refreshToken:""});const s=await this.apiFreeService.fetch({method:"POST",url:"apiLocationList"});if(!s.success)return s;const i=t.data.user.default.location;return await this.locationService.setLocationsData(s.data),await this.locationService.setActiveLocation(i),{success:!0,data:{success:!0}}}async manageAccount(){if(!this.globalStateService.hasInternetConnection)return{success:!1,errors:[{code:0,status:0,name:"",message:this.i18nService.t("base:connect-errors.no-internet")}]};const e=await this.apiPremiumService.fetch({method:"POST",url:"apiAccountAuthToken"});return e.success?(await this.accessService.proceedToWebsiteAccount({authToken:e.data.token}),{success:!0,data:{success:!0}}):e}async registerAccount(){return await this.accessService.proceedToWebsitePage({page:"pricing",params:{utm_campaign:"signup"}}),{success:!0,data:{success:!0}}}async resetPassword(e){if(!this.globalStateService.hasInternetConnection)return{success:!1,errors:[{code:0,status:0,name:"",message:this.i18nService.t("base:connect-errors.no-internet")}]};const t=await this.apiPremiumService.fetch({method:"POST",url:"authForgotPassword",body:e});return t.success?{success:!0,data:{success:!0}}:t}async getUserData(){return await Promise.resolve(),{success:!0,data:{user:this.userService.user,subscription:this.userService.subscription,canUsePremiumDomain:this.userService.canUsePremiumDomain}}}async premiumRefreshTokenFailedListener(){(await this.logout()).success&&this.messageService.notifyPopup({type:"authentication-change",success:!0,data:{success:!0}})}async criticalErrorOccured(){await this.globalStateService.setCriticalError(!0),await this.apiFreeService.removeTokens()}async freeRefreshTokenFailedListener(){await this.criticalErrorOccured(),this.messageService.notifyPopup({type:"critical-error",success:!0,data:{success:!0}})}}class $o{constructor(e,t){this.messageService=e,this.authController=t}init(){this.messageService.subscribe({"get-critical-error":this.getCriticalError.bind(this),relaunch:this.relaunch.bind(this),login:this.login.bind(this),logout:this.logout.bind(this),"reset-password":this.resetPassword.bind(this),"register-account":this.registerAccount.bind(this),"manage-account":this.manageAccount.bind(this),"get-user-data":this.getUserData.bind(this)})}async getCriticalError(){return{...await this.authController.getCriticalError(),type:"get-critical-error"}}async relaunch(){return{...await this.authController.relaunch(),type:"relaunch"}}async login(e){return{...await this.authController.login(e),type:"login"}}async logout(){return{...await this.authController.logout(),type:"logout"}}async resetPassword(e){return{...await this.authController.resetPassword(e),type:"reset-password"}}async registerAccount(){return{...await this.authController.registerAccount(),type:"register-account"}}async manageAccount(){return{...await this.authController.manageAccount(),type:"manage-account"}}async getUserData(){return{...await this.authController.getUserData(),type:"get-user-data"}}}const Mo=new Do(Mt,dn,hn,mn,vn,Bi,jt,zt,cn),Fo=new $o(jt,Mo);export{Uo as A,Lo as B,zt as C,nn as D,Fo as E,zo as F,dn as G,hn as H,So as I,vn as J,Mo as K,hs as L,no as R,Nt as S,Ft as a,H as b,cs as c,fn as d,Yt as e,lr as f,Bs as g,$t as h,se as i,Bi as j,or as k,cn as l,jt as m,vr as n,Mt as o,U as p,fe as q,re as r,Vt as s,mn as t,us as u,Ws as v,Ma as w,ce as x,jo as y,v as z};
